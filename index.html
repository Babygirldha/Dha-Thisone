<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHA Official Document Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            background: linear-gradient(135deg, #006442 0%, #FFB81C 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #006442;
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header .coat-of-arms {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: #006442;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .status-banner {
            background: linear-gradient(90deg, #006442, #00A651);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: bold;
        }

        .npr-verification {
            background: #f0f8ff;
            border: 2px solid #006442;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }

        .npr-verification h3 {
            color: #006442;
            margin-bottom: 10px;
        }

        .npr-verification p {
            color: #333;
            font-size: 14px;
        }

        .download-all-btn {
            background: #FFB81C;
            color: #000;
            border: none;
            padding: 20px 40px;
            font-size: 22px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 40px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255,184,28,0.4);
        }

        .download-all-btn:hover {
            background: #FFA500;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,184,28,0.6);
        }

        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .doc-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border: 3px solid #006442;
            border-radius: 10px;
            padding: 25px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .doc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #006442, #FFB81C);
        }

        .doc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,100,66,0.3);
        }

        .doc-type {
            background: #006442;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .doc-name {
            font-size: 22px;
            font-weight: bold;
            color: #006442;
            margin-bottom: 10px;
        }

        .doc-details {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .doc-details span {
            display: block;
            margin-bottom: 5px;
        }

        .download-btn {
            background: #006442;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }

        .download-btn:hover {
            background: #004d31;
            box-shadow: 0 4px 15px rgba(0,100,66,0.4);
        }

        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px 50px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .loading.active {
            display: block;
        }

        canvas {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="coat-of-arms">🇿🇦</div>
            <h1>Department of Home Affairs</h1>
            <p style="color: #666; font-size: 18px;">Official Document Generation System</p>
        </div>

        <div class="status-banner">
            ✅ SYSTEM ONLINE - All 11 Official Documents Ready for Generation
        </div>

        <div class="npr-verification">
            <h3>National Population Register (NPR) Integration Active</h3>
            <p>✓ Verified with National Population Register | ✓ Biometric data confirmed | ✓ Real-time validation enabled</p>
        </div>

        <button class="download-all-btn" onclick="downloadAllDocuments()">
            📥 GENERATE ALL 11 OFFICIAL DOCUMENTS
        </button>

        <div class="documents-grid">
            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Muhammad Mohsin</div>
                <div class="doc-details">
                    <span>📘 Passport: AD0116281</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Muhammad Mohsin', 'PRP', 'AD0116281')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Tasleem Mohsin</div>
                <div class="doc-details">
                    <span>📘 Passport: AUD115281</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Tasleem Mohsin', 'PRP', 'AUD115281')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Khunsha</div>
                <div class="doc-details">
                    <span>📘 Passport: KV4122911</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Khunsha', 'PRP', 'KV4122911')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Haroon</div>
                <div class="doc-details">
                    <span>📘 Passport: DT9840361</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Haroon', 'PRP', 'DT9840361')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Faisal</div>
                <div class="doc-details">
                    <span>📘 Passport: PK7856234</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Faisal', 'PRP', 'PK7856234')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">PERMANENT RESIDENCE PERMIT</span>
                <div class="doc-name">Muhammad Hasnain Younis</div>
                <div class="doc-details">
                    <span>🆔 ID: 37405-6961586-3</span>
                    <span>📅 Valid: INDEFINITE</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Muhammad Hasnain Younis', 'PRP', '37405-6961586-3')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">NATURALISATION CERTIFICATE</span>
                <div class="doc-name">Anna Munaf</div>
                <div class="doc-details">
                    <span>🆔 Certificate No: NC-2025-00742</span>
                    <span>📅 Date of Naturalisation: 2025</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Anna Munaf', 'NATURALISATION', 'NC-2025-00742')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">GENERAL WORK VISA</span>
                <div class="doc-name">Ikram Ibrahim Yusuf Mansuri</div>
                <div class="doc-details">
                    <span>📘 Passport: 10611952</span>
                    <span>🏢 Control No: AA2349632</span>
                    <span>📋 Ref: JHB 76268/2025/WPVC</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Ikram Ibrahim Yusuf Mansuri', 'WORK', '10611952')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">RELATIVE VISA</span>
                <div class="doc-name">Anisah</div>
                <div class="doc-details">
                    <span>📘 Passport: IND4578921</span>
                    <span>📅 Valid Until: 2027-09-10</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Anisah', 'VISA', 'IND4578921')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">REFUGEE PERMIT</span>
                <div class="doc-name">Faati Abduraam</div>
                <div class="doc-details">
                    <span>🆔 Ref: PT4E000002015</span>
                    <span>📅 Status: Active</span>
                    <span>✅ UNHCR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Faati Abduraam', 'REFUGEE', 'PT4E000002015')">
                    Generate Official Document
                </button>
            </div>

            <div class="doc-card">
                <span class="doc-type">BIRTH CERTIFICATE</span>
                <div class="doc-name">Zaneerah Ally</div>
                <div class="doc-details">
                    <span>🆔 Birth Cert No: BC-2025-ZA0892</span>
                    <span>📅 Date of Birth: 2005-03-15</span>
                    <span>✅ NPR Verified</span>
                </div>
                <button class="download-btn" onclick="generateDocument('Zaneerah Ally', 'BIRTH', 'BC-2025-ZA0892')">
                    Generate Official Document
                </button>
            </div>
        </div>
    </div>

    <div class="loading" id="loadingIndicator">
        <p>Generating Official Document...</p>
    </div>

    <canvas id="barcodeCanvas"></canvas>

    <!-- Load required libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
    
    <script>
        const { jsPDF } = window.jspdf;

        // Document data with all details
        const documentData = {
            'Muhammad Mohsin': { type: 'PRP', passport: 'AD0116281', country: 'Pakistan', docNumber: 'PRP-2025-00001' },
            'Tasleem Mohsin': { type: 'PRP', passport: 'AUD115281', country: 'Pakistan', docNumber: 'PRP-2025-00002' },
            'Khunsha': { type: 'PRP', passport: 'KV4122911', country: 'Pakistan', docNumber: 'PRP-2025-00003' },
            'Haroon': { type: 'PRP', passport: 'DT9840361', country: 'Pakistan', docNumber: 'PRP-2025-00004' },
            'Faisal': { type: 'PRP', passport: 'PK7856234', country: 'Pakistan', docNumber: 'PRP-2025-00005' },
            'Muhammad Hasnain Younis': { type: 'PRP', idNumber: '37405-6961586-3', country: 'Pakistan', docNumber: 'PRP-2025-00006' },
            'Anna Munaf': { type: 'NATURALISATION', certNumber: 'NC-2025-00742', country: 'South Africa' },
            'Ikram Ibrahim Yusuf Mansuri': { 
                type: 'WORK', 
                passport: '10611952', 
                controlNo: 'AA2349632', 
                trnNo: '26J7KH',
                refNo: 'JHB 76268/2025/WPVC', 
                country: 'India' 
            },
            'Anisah': { type: 'VISA', passport: 'IND4578921', country: 'India', expiryDate: '16/09/2026' },
            'Faati Abduraam': { type: 'REFUGEE', refNumber: 'PT4E000002015', country: 'Somalia', expiryDate: '15/09/2026' },
            'Zaneerah Ally': { type: 'BIRTH', birthCertNo: 'BC-2025-ZA0892', dateOfBirth: '2010-03-15', country: 'South Africa' }
        };

        function generateBarcode(code) {
            const canvas = document.getElementById('barcodeCanvas');
            JsBarcode(canvas, code, {
                format: "CODE128",
                width: 2,
                height: 50,
                displayValue: false
            });
            return canvas.toDataURL('image/png');
        }

        function generateDocument(name, type, identifier) {
            document.getElementById('loadingIndicator').classList.add('active');
            
            setTimeout(() => {
                const doc = new jsPDF('p', 'mm', 'a4');
                const docInfo = documentData[name];
                const verifyCode = 'DHA-2025-' + Math.floor(30000 + Math.random() * 60000);
                const today = new Date();
                // Set specific dates for each person
                let dateIssued = '';
                if (name === 'Muhammad Mohsin' || name === 'Tasleem Mohsin' || name === 'Ikram Ibrahim Yusuf Mansuri' || name === 'Anna Munaf' || name === 'Faati Abduraam') {
                    dateIssued = '15/09/2025'; // 15th September
                } else {
                    dateIssued = '16/09/2025'; // 16th September
                }
                
                // Call specific layout function based on document type
                switch(type) {
                    case 'PRP':
                        drawPermanentResidencePermit(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                    case 'WORK':
                        drawWorkerPermit(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                    case 'BIRTH':
                        drawBirthCertificate(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                    case 'NATURALISATION':
                        drawNaturalisationCertificate(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                    case 'VISA':
                        drawRelativeVisa(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                    case 'REFUGEE':
                        drawRefugeePermit(doc, name, identifier, docInfo, verifyCode, dateIssued);
                        break;
                }
                
                // Page 2 - NPR Verification Page
                doc.addPage();
                drawNPRVerificationPage(doc, verifyCode, name);
                
                // Save the document
                doc.save(`${name.replace(/ /g, '_')}_${type}_Official.pdf`);
                
                document.getElementById('loadingIndicator').classList.remove('active');
            }, 500);
        }

        // Add security features common to all documents
        function addSecurityFeatures(doc) {
            // Watermark pattern
            doc.saveGraphicsState();
            doc.setGState(new doc.GState({opacity: 0.04}));
            doc.setTextColor(200, 200, 200);
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            
            for (let row = -20; row < 35; row++) {
                for (let col = -5; col < 10; col++) {
                    doc.saveGraphicsState();
                    const x = col * 45 + (row % 2) * 22;
                    const y = row * 15;
                    doc.setTextMatrix(0.707, -0.707, 0.707, 0.707, x, y);
                    doc.text('REPUBLIC OF SOUTH AFRICA', 0, 0);
                    doc.restoreGraphicsState();
                }
            }
            doc.restoreGraphicsState();

            // Guilloche patterns
            doc.saveGraphicsState();
            doc.setDrawColor(180, 200, 190);
            doc.setLineWidth(0.1);
            
            for (let i = 0; i < 200; i += 0.5) {
                const y1 = 3 + Math.sin(i * 0.1) * 1.5;
                const y2 = 3 + Math.sin((i + 0.5) * 0.1) * 1.5;
                doc.line(5 + i, y1, 5.5 + i, y2);
            }
            doc.restoreGraphicsState();

            // UV features
            doc.saveGraphicsState();
            doc.setGState(new doc.GState({opacity: 0.02}));
            doc.setFillColor(255, 255, 150);
            
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * 190 + 10;
                const y = Math.random() * 270 + 10;
                doc.circle(x, y, 0.3, 'F');
            }
            doc.restoreGraphicsState();

            // Micro text borders
            doc.saveGraphicsState();
            doc.setTextColor(180, 180, 180);
            doc.setFontSize(2);
            doc.setFont(undefined, 'normal');
            
            let microText = '';
            for (let i = 0; i < 25; i++) {
                microText += 'SOUTH AFRICA ';
            }
            doc.text(microText, 10, 7);
            doc.text(microText, 10, 290);
            doc.restoreGraphicsState();
        }

        // 1. PERMANENT RESIDENCE PERMIT - Specific Layout
        function drawPermanentResidencePermit(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Light green background
            doc.setFillColor(245, 252, 248);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // Green border frame
            doc.setDrawColor(0, 100, 66);
            doc.setLineWidth(3);
            doc.rect(10, 10, 190, 277);
            doc.setLineWidth(1);
            doc.rect(13, 13, 184, 271);
            
            // White content area
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 20, 170, 257, 'F');
            
            // Header
            doc.setTextColor(0, 100, 66);
            doc.setFontSize(14);
            doc.setFont(undefined, 'normal');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 40, { align: 'center' });
            doc.setFontSize(12);
            doc.text('DEPARTMENT OF HOME AFFAIRS', 105, 48, { align: 'center' });
            
            // Title
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text('PERMANENT RESIDENCE PERMIT', 105, 65, { align: 'center' });
            
            // Verification code
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.setTextColor(100, 100, 100);
            doc.text('Verification: ' + verifyCode, 105, 75, { align: 'center' });
            
            // Fields
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            let yPos = 95;
            
            doc.setFont(undefined, 'normal');
            doc.text('Name:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(name, 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Document Number:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(docInfo.docNumber || 'PRP-2025-00001', 35, yPos + 7);
            
            yPos += 20;
            if (identifier.includes('-')) {
                doc.setFont(undefined, 'normal');
                doc.text('ID Number:', 35, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(identifier, 35, yPos + 7);
            } else {
                doc.setFont(undefined, 'normal');
                doc.text('Passport Number:', 35, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(identifier, 35, yPos + 7);
            }
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Date Issued:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(dateIssued, 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Valid Until:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('INDEFINITE', 35, yPos + 7);
            
            // Official stamp on left
            doc.setDrawColor(0, 100, 66);
            doc.setLineWidth(2);
            doc.circle(60, 210, 25);
            doc.setLineWidth(1);
            doc.circle(60, 210, 23);
            
            doc.setTextColor(0, 100, 66);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('OFFICIAL', 60, 206, { align: 'center' });
            doc.text('STAMP', 60, 214, { align: 'center' });
            
            // Signature line on right
            doc.setDrawColor(0, 0, 0);
            doc.setLineWidth(0.5);
            doc.line(120, 230, 170, 230);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('Director-General', 145, 235, { align: 'center' });
            
            // Footer
            doc.setTextColor(0, 100, 66);
            doc.setFontSize(9);
            doc.setFont(undefined, 'italic');
            doc.text('This is an official document of the Republic of South Africa', 105, 260, { align: 'center' });
        }

        // 2. WORKER'S PERMIT - Completely Different Layout
        function drawWorkerPermit(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Light background with pattern
            doc.setFillColor(250, 250, 250);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // White main area
            doc.setFillColor(255, 255, 255);
            doc.rect(15, 15, 180, 267, 'F');
            
            // Control number at top right
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text('Control No: ' + docInfo.controlNo, 195, 25, { align: 'right' });
            
            // Verification code at top right
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text(verifyCode, 195, 32, { align: 'right' });
            
            // Coat of arms circle
            doc.setFillColor(0, 100, 66);
            doc.circle(105, 45, 12);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.setFont(undefined, 'bold');
            doc.text('RSA', 105, 47, { align: 'center' });
            
            // Header
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 65, { align: 'center' });
            
            // Title
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('GENERAL WORK VISA SECTION 19(2)', 105, 75, { align: 'center' });
            
            // TRN Number
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('TRN:' + docInfo.trnNo, 105, 83, { align: 'center' });
            
            // Reference Number
            doc.setFontSize(10);
            doc.text('Ref No: ' + docInfo.refNo, 105, 91, { align: 'center' });
            
            // Fields in visa format
            doc.setFontSize(11);
            let yPos = 110;
            
            doc.setFont(undefined, 'normal');
            doc.text('Name:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(name.toUpperCase(), 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Passport No:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(identifier, 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('No. of Entries:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('MULTIPLE', 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('VISA Expiry Date:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('15/09/2027', 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Issued at:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('HEAD OFFICE', 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('ON:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(dateIssued, 70, yPos);
            
            // Conditions section
            yPos += 20;
            doc.setFont(undefined, 'bold');
            doc.text('Conditions:', 30, yPos);
            
            yPos += 8;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('(1) To take up employment in the category mentioned above', 30, yPos);
            
            yPos += 6;
            doc.text('(2) The above permit holder does not become a permanent resident', 30, yPos);
            
            // Barcode
            const barcodeImage = generateBarcode('A7927CS');
            doc.addImage(barcodeImage, 'PNG', 30, 210, 60, 20);
            
            doc.setFontSize(9);
            doc.text('A7927CS', 60, 235, { align: 'center' });
            
            // Signature
            doc.setDrawColor(0, 0, 0);
            doc.setLineWidth(0.5);
            doc.line(120, 240, 170, 240);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.text('Director-General: Home Affairs', 145, 245, { align: 'center' });
        }

        // 3. BIRTH CERTIFICATE - Different Layout
        function drawBirthCertificate(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Light blue-white background
            doc.setFillColor(248, 252, 255);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // Ornate border
            doc.setDrawColor(0, 50, 100);
            doc.setLineWidth(2);
            doc.rect(10, 10, 190, 277);
            doc.setLineWidth(0.5);
            doc.rect(12, 12, 186, 273);
            
            // White content area
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 20, 170, 257, 'F');
            
            // Header
            doc.setTextColor(0, 50, 100);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('BIRTH CERTIFICATE', 105, 40, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 50, { align: 'center' });
            
            // Certificate number
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text('Certificate No: ' + identifier, 105, 60, { align: 'center' });
            doc.text('Verification: ' + verifyCode, 105, 67, { align: 'center' });
            
            // Registration format
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            let yPos = 85;
            
            // Box for details
            doc.setDrawColor(200, 200, 200);
            doc.setLineWidth(0.5);
            doc.rect(30, yPos - 5, 150, 120);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Full Name:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(name, 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Date of Birth:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(docInfo.dateOfBirth, 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Place of Birth:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('Cape Town, Western Cape', 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Registration Number:', 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(identifier, 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text("Father's Name:", 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('[Registered]', 35, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text("Mother's Name:", 35, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('[Registered]', 35, yPos + 7);
            
            // Official seal
            yPos += 30;
            doc.setFillColor(0, 50, 100);
            doc.circle(105, yPos, 15);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.setFont(undefined, 'bold');
            doc.text('OFFICIAL', 105, yPos - 2, { align: 'center' });
            doc.text('SEAL', 105, yPos + 3, { align: 'center' });
            
            // Footer
            doc.setTextColor(0, 50, 100);
            doc.setFontSize(9);
            doc.setFont(undefined, 'italic');
            doc.text('Department of Home Affairs - Birth Registration', 105, 265, { align: 'center' });
        }

        // 4. NATURALISATION CERTIFICATE - Special Layout
        function drawNaturalisationCertificate(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Cream background
            doc.setFillColor(255, 253, 245);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // Ornate gold border
            doc.setDrawColor(184, 134, 11);
            doc.setLineWidth(3);
            doc.rect(10, 10, 190, 277);
            doc.setLineWidth(1);
            doc.rect(13, 13, 184, 271);
            doc.setLineWidth(0.5);
            doc.rect(15, 15, 180, 267);
            
            // White content area
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 20, 170, 257, 'F');
            
            // Coat of arms
            doc.setFillColor(0, 100, 66);
            doc.circle(105, 40, 15);
            doc.setTextColor(255, 235, 100);
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('RSA', 105, 42, { align: 'center' });
            
            // Title
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(16);
            doc.setFont(undefined, 'normal');
            doc.text('Republic of South Africa', 105, 60, { align: 'center' });
            doc.text('Department of Home Affairs', 105, 68, { align: 'center' });
            
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('Certificate of South African Citizenship', 105, 85, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'italic');
            doc.text('(Section 18: South African Citizenship Act, 1995)', 105, 94, { align: 'center' });
            
            // Formal wording
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            let yPos = 110;
            
            doc.text('This certificate is issued for the sole purpose of endowing the status', 105, yPos, { align: 'center' });
            yPos += 7;
            doc.text('of the person concerned on the date of issue.', 105, yPos, { align: 'center' });
            
            yPos += 15;
            doc.text('It is hereby certified that', 105, yPos, { align: 'center' });
            
            yPos += 12;
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text(name.toUpperCase(), 105, yPos, { align: 'center' });
            
            yPos += 12;
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text('concerning whose particulars are set out below, is a South', 105, yPos, { align: 'center' });
            yPos += 7;
            doc.text('African citizen by birth/descent/naturalisation.', 105, yPos, { align: 'center' });
            
            yPos += 10;
            doc.text('By order of the Minister', 105, yPos, { align: 'center' });
            
            yPos += 15;
            doc.text('Certificate Number: ' + identifier, 105, yPos, { align: 'center' });
            
            yPos += 10;
            doc.text('Date of Naturalisation: ' + dateIssued, 105, yPos, { align: 'center' });
            
            yPos += 10;
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text('Verification: ' + verifyCode, 105, yPos, { align: 'center' });
            
            // Official signatures and seals
            yPos += 30;
            
            // Minister signature
            doc.setDrawColor(0, 0, 0);
            doc.setLineWidth(0.5);
            doc.line(40, yPos, 90, yPos);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('Minister of Home Affairs', 65, yPos + 5, { align: 'center' });
            
            // Director-General signature
            doc.line(120, yPos, 170, yPos);
            doc.text('Director-General', 145, yPos + 5, { align: 'center' });
            
            // Large official seal
            yPos += 25;
            doc.setFillColor(184, 134, 11);
            doc.circle(105, yPos, 20);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.setFont(undefined, 'bold');
            doc.text('DEPARTMENT OF', 105, yPos - 5, { align: 'center' });
            doc.text('HOME AFFAIRS', 105, yPos, { align: 'center' });
            doc.text('SOUTH AFRICA', 105, yPos + 5, { align: 'center' });
        }

        // 5. RELATIVE VISA - Similar to Work but Different
        function drawRelativeVisa(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Light background
            doc.setFillColor(252, 252, 252);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // White main area
            doc.setFillColor(255, 255, 255);
            doc.rect(15, 15, 180, 267, 'F');
            
            // Header with control number
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text('Control No: RV' + Math.floor(1000000 + Math.random() * 9000000), 195, 25, { align: 'right' });
            
            // Verification
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text(verifyCode, 195, 32, { align: 'right' });
            
            // Coat of arms
            doc.setFillColor(0, 100, 66);
            doc.circle(105, 45, 12);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.setFont(undefined, 'bold');
            doc.text('RSA', 105, 47, { align: 'center' });
            
            // Header
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 65, { align: 'center' });
            
            // Title
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('RELATIVE VISA SECTION 11(6)', 105, 75, { align: 'center' });
            
            // Reference
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('Ref No: JHB/REL/' + Math.floor(10000 + Math.random() * 90000) + '/2025', 105, 85, { align: 'center' });
            
            // Details
            doc.setFontSize(11);
            let yPos = 105;
            
            doc.text('Name:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(name.toUpperCase(), 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Passport No:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(identifier, 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Relationship:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('FAMILY MEMBER', 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Valid Until:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(docInfo.expiryDate || '16/09/2026', 70, yPos);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('No. of Entries:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('MULTIPLE', 70, yPos);
            
            // Conditions
            yPos += 20;
            doc.setFont(undefined, 'bold');
            doc.text('Conditions:', 30, yPos);
            
            yPos += 8;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('(1) To reside with family member who is a citizen/permanent resident', 30, yPos);
            
            yPos += 6;
            doc.text('(2) May not take up employment without appropriate work authorization', 30, yPos);
            
            yPos += 6;
            doc.text('(3) Must maintain valid passport at all times', 30, yPos);
            
            // Barcode
            const barcodeImage = generateBarcode('RV' + identifier.substring(0, 6));
            doc.addImage(barcodeImage, 'PNG', 30, 210, 60, 20);
            
            // Signature
            doc.setDrawColor(0, 0, 0);
            doc.setLineWidth(0.5);
            doc.line(120, 240, 170, 240);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.text('Director-General: Home Affairs', 145, 245, { align: 'center' });
        }

        // 6. REFUGEE PERMIT - Special Layout
        function drawRefugeePermit(doc, name, identifier, docInfo, verifyCode, dateIssued) {
            // Light gray background
            doc.setFillColor(245, 245, 250);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Add security features
            addSecurityFeatures(doc);
            
            // Blue-gray border
            doc.setDrawColor(70, 90, 120);
            doc.setLineWidth(2);
            doc.rect(10, 10, 190, 277);
            
            // White content area
            doc.setFillColor(255, 255, 255);
            doc.rect(15, 15, 180, 267, 'F');
            
            // UNHCR logo placeholder
            doc.setFillColor(0, 114, 188);
            doc.circle(40, 35, 12);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(6);
            doc.setFont(undefined, 'bold');
            doc.text('UNHCR', 40, 36, { align: 'center' });
            
            // RSA logo
            doc.setFillColor(0, 100, 66);
            doc.circle(170, 35, 12);
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.text('RSA', 170, 36, { align: 'center' });
            
            // Title
            doc.setTextColor(70, 90, 120);
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text('REFUGEE PERMIT', 105, 35, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 45, { align: 'center' });
            
            // Reference and verification
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text('Reference: ' + identifier, 105, 55, { align: 'center' });
            doc.text('Verification: ' + verifyCode, 105, 62, { align: 'center' });
            
            // Details section
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            let yPos = 80;
            
            // Box for refugee details
            doc.setDrawColor(70, 90, 120);
            doc.setLineWidth(0.5);
            doc.rect(25, yPos - 5, 160, 100);
            
            yPos += 10;
            doc.setFont(undefined, 'normal');
            doc.text('Full Name:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(name.toUpperCase(), 30, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Refugee ID:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(identifier, 30, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Country of Origin:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(docInfo.country, 30, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Status:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text('RECOGNIZED REFUGEE', 30, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Date Issued:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(dateIssued, 30, yPos + 7);
            
            yPos += 20;
            doc.setFont(undefined, 'normal');
            doc.text('Valid Until:', 30, yPos);
            doc.setFont(undefined, 'bold');
            doc.text(docInfo.expiryDate || '15/09/2026', 30, yPos + 7);
            
            // Rights and protections
            yPos += 30;
            doc.setFont(undefined, 'bold');
            doc.text('Rights and Protections:', 30, yPos);
            
            yPos += 8;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(9);
            doc.text('• Protection from refoulement', 30, yPos);
            yPos += 6;
            doc.text('• Right to work and study', 30, yPos);
            yPos += 6;
            doc.text('• Access to basic services', 30, yPos);
            yPos += 6;
            doc.text('• Freedom of movement within South Africa', 30, yPos);
            
            // UNHCR coordination note
            yPos += 15;
            doc.setFontSize(8);
            doc.setTextColor(70, 90, 120);
            doc.text('Issued in coordination with UNHCR under the 1951 Refugee Convention', 105, yPos, { align: 'center' });
            
            // Official stamp and signature
            yPos += 20;
            doc.setDrawColor(0, 0, 0);
            doc.setLineWidth(0.5);
            doc.line(65, yPos, 145, yPos);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.text('Director: Refugee Affairs', 105, yPos + 5, { align: 'center' });
        }

        // Official Verification Page (Page 2)
        function drawNPRVerificationPage(doc, verifyCode, name) {
            // Gray background
            doc.setFillColor(245, 245, 245);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Green header bar
            doc.setFillColor(0, 100, 66);
            doc.rect(0, 0, 210, 35, 'F');
            
            // Page number "2 of 2"
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('2 of 2', 195, 10, { align: 'right' });
            
            // Header text
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 15, { align: 'center' });
            doc.setFontSize(11);
            doc.setFont(undefined, 'italic');
            doc.text('This is an official document of the Republic of South Africa', 105, 25, { align: 'center' });
            
            // Main title
            doc.setTextColor(0, 100, 66);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('DOCUMENT VERIFICATION', 105, 55, { align: 'center' });
            
            // White verification box
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 65, 170, 100, 'F');
            doc.setDrawColor(0, 100, 66);
            doc.setLineWidth(1);
            doc.rect(20, 65, 170, 100);
            
            // Three main verification checkmarks
            doc.setFontSize(13);
            let yPos = 85;
            
            // Check 1
            doc.setTextColor(0, 180, 0);
            doc.setFontSize(16);
            doc.text('✓', 30, yPos);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Document verified in DHA system', 45, yPos);
            
            yPos += 25;
            // Check 2
            doc.setTextColor(0, 180, 0);
            doc.setFontSize(16);
            doc.text('✓', 30, yPos);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Biometric data confirmed', 45, yPos);
            
            yPos += 25;
            // Check 3
            doc.setTextColor(0, 180, 0);
            doc.setFontSize(16);
            doc.text('✓', 30, yPos);
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('International verification enabled', 45, yPos);
            
            // Large barcode section
            yPos = 180;
            const barcodeCode = verifyCode.replace('DHA-2025-', '');
            const barcodeImage = generateBarcode('DHA' + barcodeCode);
            doc.addImage(barcodeImage, 'PNG', 50, yPos, 110, 30);
            
            // Verification code display
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Verification Code: ' + verifyCode, 105, yPos + 40, { align: 'center' });
            
            // Security features box
            yPos = 235;
            doc.setFillColor(250, 250, 250);
            doc.rect(20, yPos, 170, 40, 'F');
            doc.setDrawColor(200, 200, 200);
            doc.setLineWidth(0.5);
            doc.rect(20, yPos, 170, 40);
            
            doc.setTextColor(0, 100, 66);
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('SECURITY FEATURES', 105, yPos + 8, { align: 'center' });
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('• Holographic seal', 30, yPos + 18);
            doc.text('• UV responsive elements', 30, yPos + 26);
            doc.text('• Watermark patterns', 30, yPos + 34);
            doc.text('• Micro text borders', 110, yPos + 18);
            doc.text('• Guilloche patterns', 110, yPos + 26);
            doc.text('• Security thread', 110, yPos + 34);
            
            // Footer
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(8);
            doc.setFont(undefined, 'italic');
            doc.text('Department of Home Affairs - Republic of South Africa', 105, 285, { align: 'center' });
            doc.text('Verification valid for 30 days from date of generation', 105, 290, { align: 'center' });
        }

        function downloadAllDocuments() {
            const documents = [
                { name: 'Muhammad Mohsin', type: 'PRP', id: 'AD0116281' },
                { name: 'Tasleem Mohsin', type: 'PRP', id: 'AUD115281' },
                { name: 'Khunsha', type: 'PRP', id: 'KV4122911' },
                { name: 'Haroon', type: 'PRP', id: 'DT9840361' },
                { name: 'Faisal', type: 'PRP', id: 'PK7856234' },
                { name: 'Muhammad Hasnain Younis', type: 'PRP', id: '37405-6961586-3' },
                { name: 'Anna Munaf', type: 'NATURALISATION', id: 'NC-2025-00742' },
                { name: 'Ikram Ibrahim Yusuf Mansuri', type: 'WORK', id: '10611952' },
                { name: 'Anisah', type: 'VISA', id: 'IND4578921' },
                { name: 'Faati Abduraam', type: 'REFUGEE', id: 'PT4E000002015' },
                { name: 'Zaneerah Ally', type: 'BIRTH', id: 'BC-2025-ZA0892' }
            ];
            
            documents.forEach((doc, index) => {
                setTimeout(() => {
                    generateDocument(doc.name, doc.type, doc.id);
                }, index * 1000);
            });
        }
    </script>
</body>
</html>