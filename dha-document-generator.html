<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHA Document Generator - Auto-Fill from Passport</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #005a3c, #ffd700);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
        }
        .sa-flag {
            font-size: 60px;
            margin-bottom: 10px;
        }
        h1 {
            color: #005a3c;
            margin-bottom: 10px;
        }
        .input-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #005a3c;
            font-size: 14px;
        }
        input, select, textarea {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #005a3c;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        .paste-area {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border: 2px dashed #005a3c;
            margin-bottom: 20px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .btn-primary {
            background: #005a3c;
            color: white;
        }
        .btn-primary:hover {
            background: #007850;
        }
        .btn-success {
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            color: white;
            font-size: 16px;
            padding: 15px 30px;
        }
        .btn-success:hover {
            background: linear-gradient(90deg, #45a049, #7cb342);
        }
        .btn-warning {
            background: #ffc107;
            color: #000;
        }
        .btn-warning:hover {
            background: #ffb300;
        }
        .documents-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .document-type {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 5px solid #005a3c;
        }
        .document-type h3 {
            color: #005a3c;
            margin-bottom: 10px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }
        .status-message {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .quick-fill-buttons {
            margin-bottom: 20px;
        }
        .document-checklist {
            background: #f0f8f5;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .checklist-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: white;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .badge {
            padding: 3px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .badge-ready {
            background: #4caf50;
            color: white;
        }
        .badge-pending {
            background: #ff9800;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="sa-flag">ðŸ‡¿ðŸ‡¦</div>
            <h1>DHA DOCUMENT GENERATION SYSTEM</h1>
            <p style="font-weight: bold; color: #666;">Department of Home Affairs - Republic of South Africa</p>
            <p style="color: #888; margin-top: 10px;">Official Document Generator v3.0 - Auto-Fill Enabled</p>
        </div>

        <div id="statusMessage" class="status-message"></div>

        <div class="input-section">
            <h2 style="color: #005a3c; margin-bottom: 20px;">ðŸ“‹ Passport Information Input</h2>
            
            <div class="paste-area">
                <h3 style="margin-bottom: 10px;">Paste Passport Data Here</h3>
                <p style="color: #666; margin-bottom: 10px;">Copy and paste passport information below (MRZ code or text format)</p>
                <textarea id="pasteData" placeholder="Paste passport data here...
Example:
P<PAKMUSLIM<<TASLEEN<<<<<<<<<<<<<<<<<<<<<<<<
AUG162815<PAK8701015F2805146<<<<<<<<<<<<<<<"></textarea>
                <button class="btn btn-primary" onclick="parsePassportData()">Parse Passport Data</button>
                <button class="btn btn-warning" onclick="clearForm()">Clear All</button>
            </div>

            <div class="quick-fill-buttons">
                <p style="margin-bottom: 10px;"><strong>Quick Fill Examples:</strong></p>
                <button class="btn btn-primary" onclick="fillTasleenData()">Fill Tasleen's Data</button>
                <button class="btn btn-primary" onclick="fillJamalData()">Fill Jamal's Data</button>
                <button class="btn btn-primary" onclick="fillFatimaData()">Fill Fatima's Data</button>
            </div>

            <h3 style="color: #005a3c; margin-bottom: 15px;">Personal Information</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="fullName">Full Name *</label>
                    <input type="text" id="fullName" placeholder="TASLEEN MOHSIN">
                </div>
                <div class="form-group">
                    <label for="dateOfBirth">Date of Birth *</label>
                    <input type="text" id="dateOfBirth" placeholder="01/01/1987">
                </div>
                <div class="form-group">
                    <label for="nationality">Nationality *</label>
                    <input type="text" id="nationality" placeholder="PAKISTANI">
                </div>
                <div class="form-group">
                    <label for="passportNumber">Passport Number *</label>
                    <input type="text" id="passportNumber" placeholder="AUG162815">
                </div>
                <div class="form-group">
                    <label for="idNumber">ID/Permit Number</label>
                    <input type="text" id="idNumber" placeholder="8701015280514">
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender">
                        <option value="">Select...</option>
                        <option value="MALE">Male</option>
                        <option value="FEMALE">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="placeOfBirth">Place of Birth</label>
                    <input type="text" id="placeOfBirth" placeholder="HYDERABAD, PAKISTAN">
                </div>
                <div class="form-group">
                    <label for="currentAddress">Current Address</label>
                    <input type="text" id="currentAddress" placeholder="123 Main Street, Johannesburg">
                </div>
            </div>

            <h3 style="color: #005a3c; margin: 15px 0;">Employment Information (For Work Permits)</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="employer">Employer</label>
                    <input type="text" id="employer" placeholder="Company Name (Pty) Ltd">
                </div>
                <div class="form-group">
                    <label for="position">Position</label>
                    <input type="text" id="position" placeholder="Job Title">
                </div>
                <div class="form-group">
                    <label for="salary">Monthly Salary</label>
                    <input type="text" id="salary" placeholder="R45,000">
                </div>
                <div class="form-group">
                    <label for="workLocation">Work Location</label>
                    <input type="text" id="workLocation" placeholder="GAUTENG PROVINCE">
                </div>
            </div>

            <h3 style="color: #005a3c; margin: 15px 0;">Family Information (For Birth Certificates/Relative Visas)</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="motherName">Mother's Name</label>
                    <input type="text" id="motherName" placeholder="Mother's Full Name">
                </div>
                <div class="form-group">
                    <label for="fatherName">Father's Name</label>
                    <input type="text" id="fatherName" placeholder="Father's Full Name">
                </div>
                <div class="form-group">
                    <label for="spouseName">Spouse's Name</label>
                    <input type="text" id="spouseName" placeholder="Spouse's Full Name">
                </div>
                <div class="form-group">
                    <label for="relationship">Relationship (For Relative Visa)</label>
                    <input type="text" id="relationship" placeholder="e.g., Mother, Father, Sibling">
                </div>
            </div>
        </div>

        <div class="documents-section">
            <h2 style="color: #005a3c; margin-bottom: 20px;">ðŸ“„ Select Documents to Generate</h2>
            
            <div class="document-type">
                <h3>Work Permits & Visas</h3>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc1" checked>
                    <label for="doc1">General Work Permit</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc2" checked>
                    <label for="doc2">Critical Skills Work Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc3" checked>
                    <label for="doc3">Intra-Company Transfer Work Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc4" checked>
                    <label for="doc4">Business Visa</label>
                </div>
            </div>

            <div class="document-type">
                <h3>Residence Permits</h3>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc5" checked>
                    <label for="doc5">Permanent Residence Permit</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc6" checked>
                    <label for="doc6">Temporary Residence Permit</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc7" checked>
                    <label for="doc7">Relative's Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc8" checked>
                    <label for="doc8">Spousal Visa</label>
                </div>
            </div>

            <div class="document-type">
                <h3>Citizenship & Identity Documents</h3>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc9" checked>
                    <label for="doc9">Birth Certificate</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc10" checked>
                    <label for="doc10">Death Certificate</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc11" checked>
                    <label for="doc11">Marriage Certificate</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc12" checked>
                    <label for="doc12">Naturalisation Certificate</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc13" checked>
                    <label for="doc13">Certificate of Citizenship</label>
                </div>
            </div>

            <div class="document-type">
                <h3>Other Permits & Documents</h3>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc14" checked>
                    <label for="doc14">Study Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc15" checked>
                    <label for="doc15">Visitor's Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc16" checked>
                    <label for="doc16">Medical Treatment Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc17" checked>
                    <label for="doc17">Retired Person's Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc18" checked>
                    <label for="doc18">Refugee Status Permit</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc19" checked>
                    <label for="doc19">Asylum Seeker Permit</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc20" checked>
                    <label for="doc20">Exchange Visa</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="doc21" checked>
                    <label for="doc21">Treaty Visa</label>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn btn-success" onclick="generateAllDocuments()">
                    ðŸš€ GENERATE ALL SELECTED DOCUMENTS
                </button>
            </div>

            <div class="document-checklist" id="checklist" style="display: none;">
                <h3 style="color: #005a3c; margin-bottom: 15px;">ðŸ“Š Generation Status</h3>
                <div id="checklistItems"></div>
            </div>
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        
        // Quick fill functions
        function fillTasleenData() {
            document.getElementById('fullName').value = 'TASLEEN MOHSIN';
            document.getElementById('dateOfBirth').value = '01/01/1987';
            document.getElementById('nationality').value = 'PAKISTANI';
            document.getElementById('passportNumber').value = 'AUG162815';
            document.getElementById('idNumber').value = '8701015280514';
            document.getElementById('gender').value = 'FEMALE';
            document.getElementById('placeOfBirth').value = 'HYDERABAD, PAKISTAN';
            document.getElementById('currentAddress').value = '123 Main Street, Johannesburg';
            document.getElementById('employer').value = 'TECH SOLUTIONS (PTY) LTD';
            document.getElementById('position').value = 'SENIOR SOFTWARE DEVELOPER';
            document.getElementById('salary').value = 'R45,000';
            document.getElementById('workLocation').value = 'GAUTENG PROVINCE';
            showStatus('Tasleen\'s data filled successfully!', 'success');
        }
        
        function fillJamalData() {
            document.getElementById('fullName').value = 'MOHAMMAD JAMAL';
            document.getElementById('dateOfBirth').value = '15/03/1985';
            document.getElementById('nationality').value = 'PAKISTANI';
            document.getElementById('passportNumber').value = 'AJ9024653';
            document.getElementById('idNumber').value = '8503155280514';
            document.getElementById('gender').value = 'MALE';
            document.getElementById('placeOfBirth').value = 'KARACHI, PAKISTAN';
            document.getElementById('currentAddress').value = '456 Oak Avenue, Cape Town';
            document.getElementById('employer').value = 'CONSTRUCTION DYNAMICS SA';
            document.getElementById('position').value = 'CIVIL ENGINEER';
            document.getElementById('salary').value = 'R52,000';
            document.getElementById('workLocation').value = 'WESTERN CAPE';
            showStatus('Jamal\'s data filled successfully!', 'success');
        }
        
        function fillFatimaData() {
            document.getElementById('fullName').value = 'FATIMA BEGUM';
            document.getElementById('dateOfBirth').value = '10/08/1960';
            document.getElementById('nationality').value = 'PAKISTANI';
            document.getElementById('passportNumber').value = 'AP5678234';
            document.getElementById('idNumber').value = '';
            document.getElementById('gender').value = 'FEMALE';
            document.getElementById('placeOfBirth').value = 'LAHORE, PAKISTAN';
            document.getElementById('currentAddress').value = '789 Park Lane, Pretoria';
            document.getElementById('relationship').value = 'MOTHER';
            showStatus('Fatima\'s data filled successfully!', 'success');
        }
        
        function parsePassportData() {
            const pasteData = document.getElementById('pasteData').value;
            if (!pasteData) {
                showStatus('Please paste passport data first', 'error');
                return;
            }
            
            // Try to parse MRZ format
            const lines = pasteData.split('\n');
            
            // Basic MRZ parsing (simplified)
            if (lines[0] && lines[0].startsWith('P<')) {
                // Parse name from first line
                const namePart = lines[0].substring(5).replace(/</g, ' ').trim();
                const names = namePart.split('  ');
                const surname = names[0] || '';
                const givenNames = names[1] || '';
                document.getElementById('fullName').value = (givenNames + ' ' + surname).trim();
                
                // Parse passport number from second line
                if (lines[1]) {
                    const passportNo = lines[1].substring(0, 9).replace(/</g, '');
                    document.getElementById('passportNumber').value = passportNo;
                    
                    // Parse nationality
                    const nationality = lines[1].substring(10, 13);
                    document.getElementById('nationality').value = nationality === 'PAK' ? 'PAKISTANI' : nationality;
                    
                    // Parse date of birth (YYMMDD format)
                    const dob = lines[1].substring(13, 19);
                    if (dob && dob.length === 6) {
                        const year = parseInt(dob.substring(0, 2));
                        const fullYear = year > 50 ? 1900 + year : 2000 + year;
                        const month = dob.substring(2, 4);
                        const day = dob.substring(4, 6);
                        document.getElementById('dateOfBirth').value = `${day}/${month}/${fullYear}`;
                    }
                    
                    // Parse gender
                    const gender = lines[1].charAt(20);
                    document.getElementById('gender').value = gender === 'F' ? 'FEMALE' : gender === 'M' ? 'MALE' : '';
                }
                
                showStatus('Passport data parsed successfully!', 'success');
            } else {
                // Try to parse as plain text
                const textUpper = pasteData.toUpperCase();
                
                // Look for passport number pattern
                const passportMatch = textUpper.match(/[A-Z]{1,2}\d{6,9}/);
                if (passportMatch) {
                    document.getElementById('passportNumber').value = passportMatch[0];
                }
                
                // Look for date pattern
                const dateMatch = pasteData.match(/\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{2,4}/);
                if (dateMatch) {
                    document.getElementById('dateOfBirth').value = dateMatch[0];
                }
                
                showStatus('Basic data extracted. Please verify and complete the fields.', 'success');
            }
        }
        
        function clearForm() {
            document.querySelectorAll('input[type="text"], textarea').forEach(el => el.value = '');
            document.querySelectorAll('select').forEach(el => el.value = '');
            showStatus('Form cleared', 'success');
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.className = `status-message status-${type}`;
            statusDiv.textContent = message;
            statusDiv.style.display = 'block';
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }
        
        // PDF Generation Helper Functions
        function addDHAHeader(doc, title) {
            doc.setFontSize(10);
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 20, { align: 'center' });
            doc.setFontSize(12);
            doc.text('DEPARTMENT OF HOME AFFAIRS', 105, 27, { align: 'center' });
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text(title, 105, 40, { align: 'center' });
            doc.setFont(undefined, 'normal');
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(1);
            doc.line(20, 45, 190, 45);
        }
        
        function addDHAFooter(doc) {
            doc.setFontSize(8);
            doc.text('This is an official document issued by the Department of Home Affairs', 105, 280, { align: 'center' });
            doc.text('Immigration Act, 2002 (Act No. 13 of 2002)', 105, 285, { align: 'center' });
        }
        
        function addOfficialStamp(doc, y) {
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(2);
            doc.circle(60, y, 15);
            doc.setFontSize(10);
            doc.text('DHA', 60, y - 3, { align: 'center' });
            doc.text('OFFICIAL', 60, y + 2, { align: 'center' });
            doc.text('SEAL', 60, y + 7, { align: 'center' });
        }
        
        function getFormData() {
            return {
                fullName: document.getElementById('fullName').value || 'APPLICANT NAME',
                dateOfBirth: document.getElementById('dateOfBirth').value || '01/01/1990',
                nationality: document.getElementById('nationality').value || 'NATIONALITY',
                passportNumber: document.getElementById('passportNumber').value || 'PASSPORT123',
                idNumber: document.getElementById('idNumber').value || generateIdNumber(),
                gender: document.getElementById('gender').value || 'UNSPECIFIED',
                placeOfBirth: document.getElementById('placeOfBirth').value || 'PLACE OF BIRTH',
                currentAddress: document.getElementById('currentAddress').value || 'CURRENT ADDRESS',
                employer: document.getElementById('employer').value || 'EMPLOYER NAME',
                position: document.getElementById('position').value || 'POSITION',
                salary: document.getElementById('salary').value || 'R30,000',
                workLocation: document.getElementById('workLocation').value || 'GAUTENG',
                motherName: document.getElementById('motherName').value || '',
                fatherName: document.getElementById('fatherName').value || '',
                spouseName: document.getElementById('spouseName').value || '',
                relationship: document.getElementById('relationship').value || ''
            };
        }
        
        function generateIdNumber() {
            const date = new Date();
            return date.getFullYear().toString().substr(2) + 
                   (date.getMonth() + 1).toString().padStart(2, '0') +
                   date.getDate().toString().padStart(2, '0') +
                   Math.floor(Math.random() * 10000000).toString().padStart(7, '0');
        }
        
        function generateDocumentNumber(prefix) {
            const date = new Date();
            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const random = Math.floor(Math.random() * 100000).toString().padStart(5, '0');
            return `${prefix}/${year}/${month}/ZA${random}`;
        }
        
        // Individual document generators
        function generateWorkPermit(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'GENERAL WORK PERMIT');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`PERMIT NO: ${generateDocumentNumber('GWP')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('PERMIT HOLDER DETAILS:', 20, 65);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Full Name: ${data.fullName}`, 20, 75);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 83);
            doc.text(`Nationality: ${data.nationality}`, 20, 91);
            doc.text(`Passport Number: ${data.passportNumber}`, 20, 99);
            doc.text(`ID Number: ${data.idNumber}`, 20, 107);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('EMPLOYMENT DETAILS:', 20, 125);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Employer: ${data.employer}`, 20, 135);
            doc.text(`Position: ${data.position}`, 20, 143);
            doc.text(`Work Location: ${data.workLocation}`, 20, 151);
            doc.text(`Monthly Salary: ${data.salary}`, 20, 159);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('VALIDITY:', 20, 177);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Issue Date: ${new Date().toLocaleDateString()}`, 20, 187);
            doc.text(`Valid Until: ${new Date(Date.now() + 365*3*24*60*60*1000).toLocaleDateString()}`, 20, 195);
            doc.text('Status: APPROVED - ACTIVE', 20, 203);
            
            addOfficialStamp(doc, 240);
            doc.text('_____________________', 120, 250);
            doc.text('Director General', 130, 257);
            
            addDHAFooter(doc);
            return doc;
        }
        
        function generateCriticalSkillsVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'CRITICAL SKILLS WORK VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('CSV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('VISA HOLDER INFORMATION:', 20, 65);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Full Name: ${data.fullName}`, 20, 75);
            doc.text(`Passport Number: ${data.passportNumber}`, 20, 83);
            doc.text(`Nationality: ${data.nationality}`, 20, 91);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 99);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('CRITICAL SKILL CATEGORY:', 20, 117);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text('Information Technology - Software Development', 20, 127);
            doc.text('May work for any registered employer', 20, 135);
            doc.text('Valid for 5 years from issue date', 20, 143);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateBirthCertificate(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'BIRTH CERTIFICATE');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`CERTIFICATE NO: ${generateDocumentNumber('BC')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('CHILD DETAILS:', 20, 65);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Full Name: ${data.fullName}`, 20, 75);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 83);
            doc.text(`Place of Birth: ${data.placeOfBirth}`, 20, 91);
            doc.text(`Gender: ${data.gender}`, 20, 99);
            doc.text(`ID Number: ${data.idNumber}`, 20, 107);
            
            if (data.motherName || data.fatherName) {
                doc.setFont(undefined, 'bold');
                doc.setFontSize(12);
                doc.text('PARENT DETAILS:', 20, 125);
                doc.setFont(undefined, 'normal');
                doc.setFontSize(11);
                if (data.motherName) doc.text(`Mother: ${data.motherName}`, 20, 135);
                if (data.fatherName) doc.text(`Father: ${data.fatherName}`, 20, 143);
            }
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateRelativeVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'RELATIVE\'S VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('RV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('VISA HOLDER DETAILS:', 20, 65);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Full Name: ${data.fullName}`, 20, 75);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 83);
            doc.text(`Nationality: ${data.nationality}`, 20, 91);
            doc.text(`Passport Number: ${data.passportNumber}`, 20, 99);
            doc.text(`Relationship: ${data.relationship || 'FAMILY MEMBER'}`, 20, 107);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('VISA CONDITIONS:', 20, 125);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text('Valid for 24 months', 20, 135);
            doc.text('Multiple entry permitted', 20, 143);
            doc.text('May not work without separate work visa', 20, 151);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateNaturalisation(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'CERTIFICATE OF NATURALISATION');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`CERTIFICATE NO: ${generateDocumentNumber('NAT')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('THIS IS TO CERTIFY THAT:', 105, 70, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text(data.fullName, 105, 85, { align: 'center' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text('has been granted South African citizenship by naturalisation', 105, 95, { align: 'center' });
            doc.text('in terms of Section 5 of the South African Citizenship Act, 1995', 105, 103, { align: 'center' });
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('PERSONAL DETAILS:', 20, 125);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 135);
            doc.text(`Place of Birth: ${data.placeOfBirth}`, 20, 143);
            doc.text(`Previous Nationality: ${data.nationality}`, 20, 151);
            doc.text(`ID Number: ${data.idNumber}`, 20, 159);
            
            doc.text(`Date of Naturalisation: ${new Date().toLocaleDateString()}`, 20, 177);
            doc.text('Status: SOUTH AFRICAN CITIZEN', 20, 185);
            
            addOfficialStamp(doc, 240);
            doc.text('_____________________', 120, 250);
            doc.text('Minister of Home Affairs', 130, 257);
            
            addDHAFooter(doc);
            return doc;
        }
        
        function generatePermanentResidence(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'PERMANENT RESIDENCE PERMIT');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`PERMIT NO: ${generateDocumentNumber('PRP')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(12);
            doc.text('PERMIT HOLDER INFORMATION:', 20, 65);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text(`Full Name: ${data.fullName}`, 20, 75);
            doc.text(`Date of Birth: ${data.dateOfBirth}`, 20, 83);
            doc.text(`Nationality: ${data.nationality}`, 20, 91);
            doc.text(`Passport Number: ${data.passportNumber}`, 20, 99);
            doc.text(`ID Number: ${data.idNumber}`, 20, 107);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(12);
            doc.text('PERMIT DETAILS:', 20, 125);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            doc.text('Type: PERMANENT RESIDENCE', 20, 135);
            doc.text('Category: DIRECT RESIDENCE', 20, 143);
            doc.text('Valid From: INDEFINITE', 20, 151);
            doc.text('Status: ACTIVE - UNRESTRICTED RIGHTS', 20, 159);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateTemporaryResidence(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'TEMPORARY RESIDENCE PERMIT');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`PERMIT NO: ${generateDocumentNumber('TRP')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Passport: ${data.passportNumber}`, 20, 83);
            doc.text(`Valid for: 4 years from issue date`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateSpousalVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'SPOUSAL VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('SV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Spouse: ${data.spouseName || 'SPOUSE NAME'}`, 20, 83);
            doc.text(`Valid for: 2 years`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateDeathCertificate(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'DEATH CERTIFICATE');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`CERTIFICATE NO: ${generateDocumentNumber('DC')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Deceased: ${data.fullName}`, 20, 75);
            doc.text(`Date of Death: ${new Date().toLocaleDateString()}`, 20, 83);
            doc.text(`Place: ${data.currentAddress}`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateMarriageCertificate(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'MARRIAGE CERTIFICATE');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`CERTIFICATE NO: ${generateDocumentNumber('MC')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Party A: ${data.fullName}`, 20, 75);
            doc.text(`Party B: ${data.spouseName || 'SPOUSE NAME'}`, 20, 83);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateCitizenshipCertificate(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'CERTIFICATE OF CITIZENSHIP');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`CERTIFICATE NO: ${generateDocumentNumber('CC')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`ID Number: ${data.idNumber}`, 20, 83);
            doc.text(`Status: SOUTH AFRICAN CITIZEN`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateStudyVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'STUDY VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('STV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Institution: UNIVERSITY OF JOHANNESBURG`, 20, 83);
            doc.text(`Course Duration: 4 years`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateVisitorVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'VISITOR\'S VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('VV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Purpose: TOURISM`, 20, 83);
            doc.text(`Duration: 90 days`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateMedicalVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'MEDICAL TREATMENT VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('MTV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Hospital: JOHANNESBURG GENERAL`, 20, 83);
            doc.text(`Duration: 6 months`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateRetiredVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'RETIRED PERSON\'S VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('RPV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Monthly Income: R20,000`, 20, 83);
            doc.text(`Duration: 4 years`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateRefugeePermit(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'REFUGEE STATUS PERMIT');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`PERMIT NO: ${generateDocumentNumber('RSP')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Country of Origin: ${data.nationality}`, 20, 83);
            doc.text(`Status: RECOGNIZED REFUGEE`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateAsylumPermit(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'ASYLUM SEEKER PERMIT');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`PERMIT NO: ${generateDocumentNumber('ASP')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Application Date: ${new Date().toLocaleDateString()}`, 20, 83);
            doc.text(`Valid for: 6 months`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateExchangeVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'EXCHANGE VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('EV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Exchange Program: CULTURAL EXCHANGE`, 20, 83);
            doc.text(`Duration: 12 months`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateTreatyVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'TREATY VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('TV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Treaty: SADC PROTOCOL`, 20, 83);
            doc.text(`Duration: INDEFINITE`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateIntraCompanyVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'INTRA-COMPANY TRANSFER VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('ICV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Company: ${data.employer}`, 20, 83);
            doc.text(`Duration: 4 years`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateBusinessVisa(data) {
            const doc = new jsPDF();
            addDHAHeader(doc, 'BUSINESS VISA');
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text(`VISA NO: ${generateDocumentNumber('BV')}`, 190, 55, { align: 'right' });
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.fullName}`, 20, 75);
            doc.text(`Business: INVESTMENT`, 20, 83);
            doc.text(`Capital: R5,000,000`, 20, 91);
            
            addOfficialStamp(doc, 240);
            addDHAFooter(doc);
            return doc;
        }
        
        function generateAllDocuments() {
            const data = getFormData();
            const checklist = document.getElementById('checklist');
            const checklistItems = document.getElementById('checklistItems');
            
            if (!data.fullName || data.fullName === 'APPLICANT NAME') {
                showStatus('Please fill in at least the Full Name field', 'error');
                return;
            }
            
            checklist.style.display = 'block';
            checklistItems.innerHTML = '';
            
            const documents = [
                { id: 'doc1', name: 'General Work Permit', generator: generateWorkPermit },
                { id: 'doc2', name: 'Critical Skills Work Visa', generator: generateCriticalSkillsVisa },
                { id: 'doc3', name: 'Intra-Company Transfer Visa', generator: generateIntraCompanyVisa },
                { id: 'doc4', name: 'Business Visa', generator: generateBusinessVisa },
                { id: 'doc5', name: 'Permanent Residence Permit', generator: generatePermanentResidence },
                { id: 'doc6', name: 'Temporary Residence Permit', generator: generateTemporaryResidence },
                { id: 'doc7', name: 'Relative\'s Visa', generator: generateRelativeVisa },
                { id: 'doc8', name: 'Spousal Visa', generator: generateSpousalVisa },
                { id: 'doc9', name: 'Birth Certificate', generator: generateBirthCertificate },
                { id: 'doc10', name: 'Death Certificate', generator: generateDeathCertificate },
                { id: 'doc11', name: 'Marriage Certificate', generator: generateMarriageCertificate },
                { id: 'doc12', name: 'Naturalisation Certificate', generator: generateNaturalisation },
                { id: 'doc13', name: 'Certificate of Citizenship', generator: generateCitizenshipCertificate },
                { id: 'doc14', name: 'Study Visa', generator: generateStudyVisa },
                { id: 'doc15', name: 'Visitor\'s Visa', generator: generateVisitorVisa },
                { id: 'doc16', name: 'Medical Treatment Visa', generator: generateMedicalVisa },
                { id: 'doc17', name: 'Retired Person\'s Visa', generator: generateRetiredVisa },
                { id: 'doc18', name: 'Refugee Status Permit', generator: generateRefugeePermit },
                { id: 'doc19', name: 'Asylum Seeker Permit', generator: generateAsylumPermit },
                { id: 'doc20', name: 'Exchange Visa', generator: generateExchangeVisa },
                { id: 'doc21', name: 'Treaty Visa', generator: generateTreatyVisa }
            ];
            
            let generatedCount = 0;
            
            documents.forEach((docType, index) => {
                const checkbox = document.getElementById(docType.id);
                if (checkbox && checkbox.checked) {
                    setTimeout(() => {
                        const doc = docType.generator(data);
                        const filename = `${docType.name.replace(/[^a-z0-9]/gi, '_')}_${data.fullName.replace(/[^a-z0-9]/gi, '_')}.pdf`;
                        doc.save(filename);
                        
                        const item = document.createElement('div');
                        item.className = 'checklist-item';
                        item.innerHTML = `
                            <span>âœ… ${docType.name}</span>
                            <span class="badge badge-ready">Generated</span>
                        `;
                        checklistItems.appendChild(item);
                        
                        generatedCount++;
                        
                        if (generatedCount === documents.filter(d => document.getElementById(d.id).checked).length) {
                            showStatus(`Successfully generated ${generatedCount} documents!`, 'success');
                        }
                    }, index * 500); // Stagger generation to avoid browser freeze
                }
            });
        }
    </script>
</body>
</html>