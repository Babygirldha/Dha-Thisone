<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHA Official Document Generator - 11 Documents</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #005a3c, #ffd700);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .coat-of-arms {
            font-size: 80px;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        h1 {
            color: #005a3c;
            font-size: 32px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .subtitle {
            color: #666;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .verification-badge {
            display: inline-block;
            background: #d32f2f;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .document-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-left: 5px solid #005a3c;
            transition: all 0.3s;
        }
        
        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .document-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .document-title {
            color: #005a3c;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .document-name {
            color: #333;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .verification-code {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            color: #d32f2f;
            font-weight: bold;
            margin-bottom: 15px;
            display: inline-block;
        }
        
        .download-btn {
            background: #005a3c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .download-btn:hover {
            background: #007850;
            transform: translateY(-2px);
        }
        
        .download-btn:active {
            transform: scale(0.98);
        }
        
        .download-all-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .download-all-btn {
            background: linear-gradient(135deg, #005a3c, #007850);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .download-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 90, 60, 0.4);
        }
        
        .download-all-btn:disabled {
            opacity: 0.6;
            cursor: wait;
        }
        
        .status-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border: 2px solid #c3e6cb;
        }
        
        .security-notice {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #ffeeba;
            text-align: center;
        }
        
        .hidden-qr {
            display: none;
        }
        
        #barcodeCanvas {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="coat-of-arms">ü¶Ö</div>
            <h1>Department of Home Affairs</h1>
            <div class="subtitle">Republic of South Africa</div>
            <div class="subtitle" style="color: #888; font-size: 14px;">Official Document Generator System - 11 Documents</div>
            <div class="verification-badge">‚úì All Documents Include 2-Page Verification</div>
        </div>

        <!-- Security Notice -->
        <div class="security-notice">
            <strong>‚ö†Ô∏è OFFICIAL NOTICE:</strong> Each document includes 2 pages - the official permit/certificate and a DHA system verification page with barcode authentication.
        </div>

        <!-- Documents Grid -->
        <div class="documents-grid">
            <!-- Document 1 - PRP Muhammad Mohsin -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Muhammad Mohsin</div>
                <div class="verification-code">DHA-2025-10001</div>
                <button class="download-btn" onclick="generateDocument(1)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 2 - PRP Tasleem Mohsin -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Tasleem Mohsin</div>
                <div class="verification-code">DHA-2025-10002</div>
                <button class="download-btn" onclick="generateDocument(2)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 3 - PRP Khunsha -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Khunsha</div>
                <div class="verification-code">DHA-2025-10003</div>
                <button class="download-btn" onclick="generateDocument(3)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 4 - PRP Haroon -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Haroon</div>
                <div class="verification-code">DHA-2025-10004</div>
                <button class="download-btn" onclick="generateDocument(4)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 5 - PRP Faisal -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Faisal</div>
                <div class="verification-code">DHA-2025-10005</div>
                <button class="download-btn" onclick="generateDocument(5)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 6 - PRP Muhammad Hasnain Younis -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Muhammad Hasnain Younis</div>
                <div class="verification-code">DHA-2025-10006</div>
                <button class="download-btn" onclick="generateDocument(6)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 7 - Naturalisation Anna Munaf -->
            <div class="document-card">
                <div class="document-icon">üéñÔ∏è</div>
                <div class="document-title">Naturalisation Certificate</div>
                <div class="document-name">Anna Munaf</div>
                <div class="verification-code">DHA-2025-20001</div>
                <button class="download-btn" onclick="generateDocument(7)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 8 - Worker's Permit Ikram -->
            <div class="document-card">
                <div class="document-icon">üíº</div>
                <div class="document-title">Worker's Permit</div>
                <div class="document-name">Ikram Ibrahim Yusuf Mansuri</div>
                <div class="verification-code">DHA-2025-30001</div>
                <button class="download-btn" onclick="generateDocument(8)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 9 - Relative Visa Anisah -->
            <div class="document-card">
                <div class="document-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <div class="document-title">Relative Visa</div>
                <div class="document-name">Anisah</div>
                <div class="verification-code">DHA-2025-40001</div>
                <button class="download-btn" onclick="generateDocument(9)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 10 - Refugee Permit Faati -->
            <div class="document-card">
                <div class="document-icon">üõ°Ô∏è</div>
                <div class="document-title">Refugee Permit</div>
                <div class="document-name">Faati Abduraam</div>
                <div class="verification-code">DHA-2025-50001</div>
                <button class="download-btn" onclick="generateDocument(10)">üì• Download 2-Page PDF</button>
            </div>

            <!-- Document 11 - Birth Certificate Zaneerah -->
            <div class="document-card">
                <div class="document-icon">üèõÔ∏è</div>
                <div class="document-title">Birth Certificate</div>
                <div class="document-name">Zaneerah Ally</div>
                <div class="verification-code">DHA-2025-60001</div>
                <button class="download-btn" onclick="generateDocument(11)">üì• Download 2-Page PDF</button>
            </div>
        </div>

        <!-- Download All Section -->
        <div class="download-all-section">
            <h2 style="color: #005a3c; margin-bottom: 20px;">Generate All 11 Documents</h2>
            <p style="color: #666; margin-bottom: 20px;">Click below to generate all 11 official 2-page documents at once</p>
            <button class="download-all-btn" id="downloadAllBtn" onclick="downloadAll()">
                <span>üöÄ</span>
                <span>DOWNLOAD ALL 11 DOCUMENTS</span>
            </button>
            <div class="status-message" id="statusMessage">
                ‚úÖ All 11 documents generated successfully!
            </div>
        </div>
    </div>

    <!-- Hidden elements for QR and Barcode -->
    <div id="qrcode" class="hidden-qr"></div>
    <canvas id="barcodeCanvas"></canvas>

    <script>
        const { jsPDF } = window.jspdf;
        
        // Documents data array with exact information from images
        const documents = [
            { 
                id: 1, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'MUHAMMAD MOHSIN', 
                code: 'DHA-2025-10001', 
                passport: 'AD0116281', 
                nationality: 'PAKISTANI',
                dob: '15 May 2018',
                gender: 'Male',
                placeOfBirth: 'Pakistan'
            },
            { 
                id: 2, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'TASLEEM MOHSIN', 
                code: 'DHA-2025-10002', 
                passport: 'AUD115281', 
                nationality: 'PAKISTANI',
                dob: '01 Jan 1987',
                gender: 'Female',
                placeOfBirth: 'Hyderabad, Pakistan'
            },
            { 
                id: 3, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'KHUNSHA', 
                code: 'DHA-2025-10003', 
                passport: 'KV4122911', 
                nationality: 'PAKISTANI',
                dob: '23 Aug 2005',
                gender: 'Female',
                placeOfBirth: 'Lahore, Pakistan',
                idNumber: '35202-2423291-0'
            },
            { 
                id: 4, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'HAROON', 
                code: 'DHA-2025-10004', 
                passport: 'DT9840361', 
                nationality: 'PAKISTANI',
                dob: '11 Nov 2002',
                gender: 'Male',
                placeOfBirth: 'Lahore, Pakistan',
                idNumber: '35202-5214036-3'
            },
            { 
                id: 5, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'FAISAL', 
                code: 'DHA-2025-10005', 
                passport: 'MD3535005', 
                nationality: 'PAKISTANI',
                dob: '19 Jan 1995',
                gender: 'Male',
                placeOfBirth: 'Karachi, Pakistan'
            },
            { 
                id: 6, 
                type: 'PERMANENT RESIDENCE PERMIT', 
                name: 'MUHAMMAD HASNAIN YOUNIS', 
                code: 'DHA-2025-10006', 
                passport: 'CH6961586', 
                nationality: 'PAKISTANI',
                dob: '22 Jul 1986',
                gender: 'Male',
                placeOfBirth: 'Punjab, Pakistan',
                idNumber: '37405-6961586-3'
            },
            { 
                id: 7, 
                type: 'NATURALISATION CERTIFICATE', 
                name: 'ANNA MUNAF', 
                code: 'DHA-2025-20001', 
                previousNationality: 'PAKISTANI',
                idNumber: '850825 1583 187',
                dob: '25 Aug 1985',
                citizenshipDate: '01 Jan 2025'
            },
            { 
                id: 8, 
                type: 'WORK PERMIT', 
                name: 'IKRAM IBRAHIM YUSUF MANSURI', 
                code: 'DHA-2025-30001', 
                passport: '10611952',
                nationality: 'INDIAN',
                employer: 'Head Office',
                position: 'General Worker',
                sector: 'Category mentioned above',
                referenceNumber: 'JHB 76298/2025/WPVC'
            },
            { 
                id: 9, 
                type: 'RELATIVE VISA', 
                name: 'ANISAH', 
                code: 'DHA-2025-40001', 
                passport: 'PK8976543',
                nationality: 'PAKISTANI',
                relationship: 'Daughter',
                sponsor: 'Tasleem Mohsin',
                sponsorID: 'PR/2025/10002'
            },
            { 
                id: 10, 
                type: 'REFUGEE PERMIT', 
                name: 'FAATI ABDURAAM', 
                code: 'DHA-2025-50001', 
                refugeeNumber: 'PT4E000002015',
                country: 'Somalia',
                status: 'RECOGNIZED REFUGEE'
            },
            { 
                id: 11, 
                type: 'BIRTH CERTIFICATE', 
                name: 'ZANEERAH ALLY', 
                code: 'DHA-2025-60001', 
                dob: '21 Mar 2014',
                mother: 'Shera Ally',
                father: 'Not Provided',
                hospital: 'Linkwood Hospital',
                birthNumber: 'BC2014/0321/001'
            }
        ];
        
        // Generate QR Code
        async function generateQRCode(data) {
            return new Promise((resolve) => {
                const qrDiv = document.getElementById('qrcode');
                qrDiv.innerHTML = '';
                new QRCode(qrDiv, {
                    text: data,
                    width: 150,
                    height: 150,
                    correctLevel: QRCode.CorrectLevel.H
                });
                setTimeout(() => {
                    const canvas = qrDiv.querySelector('canvas');
                    if (canvas) {
                        resolve(canvas.toDataURL());
                    }
                }, 100);
            });
        }
        
        // Generate Barcode
        function generateBarcode(code) {
            const canvas = document.getElementById('barcodeCanvas');
            JsBarcode(canvas, code, {
                format: "CODE128",
                width: 2,
                height: 50,
                displayValue: true
            });
            return canvas.toDataURL();
        }
        
        // Add security pattern background
        function addSecurityBackground(doc) {
            doc.setDrawColor(200, 240, 200);
            doc.setLineWidth(0.1);
            
            // Create crosshatch pattern
            for (let i = 0; i < 210; i += 5) {
                doc.line(i, 0, i, 297, 'S');
            }
            for (let i = 0; i < 297; i += 5) {
                doc.line(0, i, 210, i, 'S');
            }
            
            // Add light green tint
            doc.setFillColor(230, 255, 230);
            doc.rect(0, 0, 210, 297, 'F');
            doc.setGlobalAlpha(0.1);
            doc.setGlobalAlpha(1);
        }
        
        // Add watermark
        function addWatermark(doc) {
            doc.setTextColor(230, 230, 230);
            doc.setFontSize(60);
            doc.setFont(undefined, 'bold');
            doc.text('DHA', 105, 150, { angle: 45, align: 'center' });
            doc.setTextColor(0, 0, 0);
        }
        
        // Add official header
        function addOfficialHeader(doc, title) {
            // Coat of Arms
            doc.setFontSize(30);
            doc.text('ü¶Ö', 105, 20, { align: 'center' });
            
            // Department name
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 30, { align: 'center' });
            doc.setFontSize(12);
            doc.text('DEPARTMENT OF HOME AFFAIRS', 105, 37, { align: 'center' });
            
            // Title
            doc.setFontSize(16);
            doc.text(title, 105, 47, { align: 'center' });
            
            // Line separator
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(1);
            doc.line(20, 50, 190, 50);
        }
        
        // Add official seal
        function addOfficialSeal(doc, x, y) {
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(2);
            doc.circle(x, y, 15);
            doc.setFontSize(8);
            doc.text('DHA', x, y-3, { align: 'center' });
            doc.text('OFFICIAL', x, y+1, { align: 'center' });
            doc.text('SEAL', x, y+5, { align: 'center' });
        }
        
        // Add footer
        function addFooter(doc, code, pageNum = 1) {
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text(`Page ${pageNum} of 2`, 105, 285, { align: 'center' });
            doc.text(`Verification Code: ${code}`, 20, 285);
            doc.text('www.dha.gov.za', 190, 285, { align: 'right' });
            doc.setTextColor(0, 0, 0);
        }
        
        // Add verification page (page 2)
        async function addVerificationPage(doc, docData) {
            doc.addPage();
            addSecurityBackground(doc);
            
            // Header
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('DOCUMENT VERIFICATION PAGE', 105, 30, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì DOCUMENT VERIFIED IN DHA SYSTEM', 105, 45, { align: 'center' });
            doc.setTextColor(0, 0, 0);
            
            // Verification box
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(2);
            doc.rect(20, 60, 170, 120);
            
            // Document details
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('DOCUMENT DETAILS:', 25, 75);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(11);
            
            doc.text(`Document Type: ${docData.type}`, 25, 85);
            doc.text(`Name: ${docData.name}`, 25, 93);
            doc.text(`Document Code: ${docData.code}`, 25, 101);
            doc.text(`Issue Date: ${new Date().toLocaleDateString('en-GB')}`, 25, 109);
            doc.text(`Status: VALID AND AUTHENTIC`, 25, 117);
            
            // Barcode
            const barcodeData = await generateBarcode(docData.code);
            doc.addImage(barcodeData, 'PNG', 25, 125, 80, 40);
            
            // QR Code
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|${docData.type}|VALID`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 120, 115, 60, 60);
            }
            
            // Security features box
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('SECURITY FEATURES:', 25, 195);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Holographic security overlay present', 30, 203);
            doc.text('‚Ä¢ UV-reactive ink verified', 30, 210);
            doc.text('‚Ä¢ Microtext patterns authenticated', 30, 217);
            doc.text('‚Ä¢ Biometric data stored in secure database', 30, 224);
            doc.text('‚Ä¢ Digital signature validated', 30, 231);
            
            // Verification instructions
            doc.setFont(undefined, 'bold');
            doc.text('TO VERIFY THIS DOCUMENT:', 25, 245);
            doc.setFont(undefined, 'normal');
            doc.text('1. Scan the QR code or barcode above', 30, 253);
            doc.text('2. Visit www.dha.gov.za/verify', 30, 260);
            doc.text('3. Enter verification code: ' + docData.code, 30, 267);
            
            // Official seal
            addOfficialSeal(doc, 50, 275);
            
            // Digital signature
            doc.setFontSize(10);
            doc.line(100, 275, 160, 275);
            doc.text('Digital Verification Officer', 130, 282, { align: 'center' });
            
            addFooter(doc, docData.code, 2);
        }
        
        // Generate Permanent Residence Permit
        async function generatePermanentResidence(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, 'PERMANENT RESIDENCE PERMIT');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 60);
            
            doc.setFontSize(16);
            doc.text('PERMANENT RESIDENCE PERMIT', 105, 75, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 85, 170, 100);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT HOLDER DETAILS:', 25, 95);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 105);
            doc.text('Passport Number: ' + docData.passport, 25, 113);
            doc.text('Nationality: ' + docData.nationality, 25, 121);
            doc.text('Date of Birth: ' + (docData.dob || 'As per passport'), 25, 129);
            doc.text('Gender: ' + (docData.gender || 'As per passport'), 25, 137);
            doc.text('Place of Birth: ' + (docData.placeOfBirth || 'Pakistan'), 25, 145);
            if (docData.idNumber) {
                doc.text('ID Number: ' + docData.idNumber, 25, 153);
            }
            doc.text('Date of Issue: ' + new Date().toLocaleDateString('en-GB'), 25, 161);
            doc.text('Status: APPROVED - PERMANENT RESIDENT', 25, 169);
            doc.text('Valid: INDEFINITELY', 25, 177);
            
            doc.setFont(undefined, 'bold');
            doc.text('CONDITIONS:', 25, 195);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Holder is a permanent resident of South Africa', 30, 203);
            doc.text('‚Ä¢ May live, work and study in South Africa', 30, 210);
            doc.text('‚Ä¢ Must maintain valid passport', 30, 217);
            doc.text('‚Ä¢ Subject to South African laws', 30, 224);
            doc.text('‚Ä¢ May apply for citizenship after 5 years', 30, 231);
            
            const qrData = `DHA-PRP:${docData.code}|${docData.name}|${docData.passport}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 250);
            
            doc.line(110, 255, 170, 255);
            doc.text('Director-General', 140, 262, { align: 'center' });
            doc.text('Department of Home Affairs', 140, 267, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Generate Birth Certificate
        async function generateBirthCertificate(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, 'BIRTH CERTIFICATE');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('CERTIFICATE NUMBER: ' + docData.code, 20, 60);
            doc.text('BIRTH NUMBER: ' + (docData.birthNumber || 'BC2014/0321/001'), 20, 68);
            
            doc.setFontSize(16);
            doc.text('BIRTH CERTIFICATE', 105, 80, { align: 'center' });
            
            doc.setFont(undefined, 'normal');
            doc.setFontSize(12);
            doc.text('This is to certify that', 105, 95, { align: 'center' });
            
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text(docData.name, 105, 108, { align: 'center' });
            
            doc.setFont(undefined, 'normal');
            doc.setFontSize(12);
            doc.text('was born on', 105, 120, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text(docData.dob, 105, 130, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 140, 170, 60);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('BIRTH DETAILS:', 25, 150);
            doc.setFont(undefined, 'normal');
            
            doc.text('Place of Birth: ' + (docData.hospital || 'Linkwood Hospital'), 25, 160);
            doc.text('District: JOHANNESBURG', 25, 168);
            doc.text('Province: GAUTENG', 25, 176);
            doc.text('Country: SOUTH AFRICA', 25, 184);
            doc.text('Gender: Female', 25, 192);
            
            doc.text('Mother: ' + (docData.mother || 'Shera Ally'), 110, 160);
            doc.text('Father: ' + (docData.father || 'Not Provided'), 110, 168);
            
            doc.setFont(undefined, 'bold');
            doc.text('REGISTRATION DETAILS:', 25, 210);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('Date of Registration: ' + new Date().toLocaleDateString('en-GB'), 25, 218);
            doc.text('Registration Office: JOHANNESBURG', 25, 225);
            doc.text('Status: OFFICIAL UNABRIDGED CERTIFICATE', 25, 232);
            
            const qrData = `DHA-BC:${docData.code}|${docData.name}|${docData.dob}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 210, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 250);
            
            doc.line(110, 255, 170, 255);
            doc.text('Registrar of Births', 140, 262, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Generate Work Permit
        async function generateWorkPermit(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, 'GENERAL WORK VISA');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('REFERENCE: ' + (docData.referenceNumber || docData.code), 20, 60);
            
            doc.setFontSize(16);
            doc.text('GENERAL WORK VISA SECTION 19(2)', 105, 75, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 85, 170, 100);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT HOLDER DETAILS:', 25, 95);
            doc.setFont(undefined, 'normal');
            
            doc.text('Name: ' + docData.name, 25, 105);
            doc.text('Passport No: ' + docData.passport, 25, 113);
            doc.text('Nationality: ' + (docData.nationality || 'FOREIGN NATIONAL'), 25, 121);
            doc.text('No. of Entries: MULTIPLE', 25, 129);
            doc.text('Issued at: HEAD OFFICE', 25, 137);
            doc.text('Visa Expiry Date: 2027-09-10', 25, 145);
            doc.text('Valid From: ' + new Date().toLocaleDateString('en-GB'), 25, 153);
            doc.text('Valid Until: 2025-09-10', 25, 161);
            doc.text('Status: APPROVED', 25, 169);
            doc.text('Employer: ' + (docData.employer || 'Head Office'), 25, 177);
            
            doc.setFont(undefined, 'bold');
            doc.text('CONDITIONS:', 25, 195);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('(1) To take up employment in the category mentioned above', 30, 203);
            doc.text('(2) The above permit holder does not become a permanent resident', 30, 210);
            doc.text('(3) Must comply with South African labour laws', 30, 217);
            doc.text('(4) Must maintain valid passport', 30, 224);
            
            const qrData = `DHA-WP:${docData.code}|${docData.name}|${docData.passport}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 250);
            
            doc.line(110, 255, 170, 255);
            doc.text('Director-General: Home Affairs', 140, 262, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Generate Relative Visa
        async function generateRelativeVisa(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, "RELATIVE'S VISA");
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('VISA NUMBER: ' + docData.code, 20, 60);
            
            doc.setFontSize(16);
            doc.text("RELATIVE'S VISA", 105, 75, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 85, 170, 100);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('APPLICANT INFORMATION:', 25, 95);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 105);
            doc.text('Passport Number: ' + (docData.passport || 'PK8976543'), 25, 113);
            doc.text('Nationality: ' + (docData.nationality || 'PAKISTANI'), 25, 121);
            doc.text('Relationship: ' + (docData.relationship || 'Daughter'), 25, 129);
            
            doc.setFont(undefined, 'bold');
            doc.text('SPONSOR INFORMATION:', 25, 142);
            doc.setFont(undefined, 'normal');
            doc.text('Sponsor Name: ' + (docData.sponsor || 'Tasleem Mohsin'), 25, 150);
            doc.text('Sponsor ID/Permit: ' + (docData.sponsorID || 'PR/2025/10002'), 25, 158);
            doc.text('Sponsor Status: Permanent Resident', 25, 166);
            doc.text('Valid Until: ' + new Date(Date.now() + 730*24*60*60*1000).toLocaleDateString('en-GB'), 25, 174);
            
            doc.setFont(undefined, 'bold');
            doc.text('VISA CONDITIONS:', 25, 192);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Valid for family reunification purposes', 30, 200);
            doc.text('‚Ä¢ May not work without additional permit', 30, 207);
            doc.text('‚Ä¢ Must reside with sponsor', 30, 214);
            doc.text('‚Ä¢ Valid for 2 years, renewable', 30, 221);
            doc.text('‚Ä¢ Must maintain valid passport', 30, 228);
            
            const qrData = `DHA-RV:${docData.code}|${docData.name}|${docData.sponsor}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 250);
            
            doc.line(110, 255, 170, 255);
            doc.text('Immigration Officer', 140, 262, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Generate Naturalisation Certificate
        async function generateNaturalisation(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, 'CERTIFICATE OF NATURALISATION');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('CERTIFICATE NUMBER: ' + docData.code, 20, 60);
            
            doc.setFontSize(16);
            doc.text('CERTIFICATE OF NATURALISATION', 105, 75, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('This is to certify that', 105, 90, { align: 'center' });
            
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text(docData.name, 105, 102, { align: 'center' });
            
            doc.setFont(undefined, 'normal');
            doc.setFontSize(12);
            doc.text('has been granted', 105, 114, { align: 'center' });
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('SOUTH AFRICAN CITIZENSHIP', 105, 126, { align: 'center' });
            
            doc.setFont(undefined, 'normal');
            doc.setFontSize(12);
            doc.text('by Naturalisation', 105, 136, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 145, 170, 70);
            
            doc.setFontSize(11);
            doc.text('Previous Nationality: ' + (docData.previousNationality || 'PAKISTANI'), 25, 155);
            doc.text('ID Number: ' + (docData.idNumber || '850825 1583 187'), 25, 163);
            doc.text('Date of Birth: ' + (docData.dob || '25 Aug 1985'), 25, 171);
            doc.text('Date of Naturalisation: ' + (docData.citizenshipDate || '01 Jan 2025'), 25, 179);
            doc.text('Place of Ceremony: PRETORIA', 25, 187);
            doc.text('Oath of Allegiance: ADMINISTERED', 25, 195);
            doc.text('Certificate Status: VALID AND PERMANENT', 25, 203);
            doc.text('ID Book Issued: YES', 25, 211);
            
            doc.setFont(undefined, 'bold');
            doc.text('CITIZENSHIP RIGHTS:', 25, 228);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Full voting rights in all elections', 30, 236);
            doc.text('‚Ä¢ Eligibility for South African passport', 30, 243);
            doc.text('‚Ä¢ All constitutional rights and duties of citizens', 30, 250);
            
            const qrData = `DHA-NC:${docData.code}|${docData.name}|${docData.idNumber}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 220, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 260);
            
            doc.line(110, 265, 170, 265);
            doc.text('Minister of Home Affairs', 140, 272, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Generate Refugee Permit
        async function generateRefugeePermit(docData) {
            const doc = new jsPDF();
            
            // Page 1 - Main Document
            addSecurityBackground(doc);
            addOfficialHeader(doc, 'REFUGEE PERMIT');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 60);
            doc.text('REFUGEE NUMBER: ' + (docData.refugeeNumber || 'PT4E000002015'), 20, 68);
            
            doc.setFontSize(16);
            doc.text('REFUGEE STATUS PERMIT', 105, 80, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 90, 170, 95);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('REFUGEE DETAILS:', 25, 100);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 110);
            doc.text('Refugee Number: ' + (docData.refugeeNumber || 'PT4E000002015'), 25, 118);
            doc.text('Country of Origin: ' + (docData.country || 'Somalia'), 25, 126);
            doc.text('Date of Recognition: ' + new Date().toLocaleDateString('en-GB'), 25, 134);
            doc.text('Valid Until: ' + new Date(Date.now() + 1460*24*60*60*1000).toLocaleDateString('en-GB'), 25, 142);
            doc.text('Status: ' + (docData.status || 'RECOGNIZED REFUGEE'), 25, 150);
            doc.text('Standing Committee Approval: GRANTED', 25, 158);
            doc.text('UNHCR Registration: VERIFIED', 25, 166);
            doc.text('Reception Office: CAPE TOWN', 25, 174);
            doc.text('File Reference: ' + (docData.refugeeNumber || 'PT4E000002015'), 25, 182);
            
            doc.setFont(undefined, 'bold');
            doc.text('RIGHTS AND PROTECTIONS:', 25, 198);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Full protection under the Refugees Act (130 of 1998)', 30, 206);
            doc.text('‚Ä¢ Right to work and study in South Africa', 30, 213);
            doc.text('‚Ä¢ Access to healthcare and basic services', 30, 220);
            doc.text('‚Ä¢ Protection from refoulement', 30, 227);
            doc.text('‚Ä¢ Freedom of movement within South Africa', 30, 234);
            doc.text('‚Ä¢ Right to apply for permanent residence after 5 years', 30, 241);
            
            const qrData = `DHA-RP:${docData.code}|${docData.name}|${docData.refugeeNumber}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 210, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 255);
            
            doc.line(110, 260, 170, 260);
            doc.text('Commissioner for Refugees', 140, 267, { align: 'center' });
            
            addFooter(doc, docData.code, 1);
            
            // Page 2 - Verification Page
            await addVerificationPage(doc, docData);
            
            return doc;
        }
        
        // Main function to generate document
        async function generateDocument(docId) {
            const docData = documents.find(d => d.id === docId);
            if (!docData) return;
            
            let doc;
            
            // Generate appropriate document based on type
            switch(docData.type) {
                case 'PERMANENT RESIDENCE PERMIT':
                    doc = await generatePermanentResidence(docData);
                    break;
                case 'BIRTH CERTIFICATE':
                    doc = await generateBirthCertificate(docData);
                    break;
                case 'WORK PERMIT':
                    doc = await generateWorkPermit(docData);
                    break;
                case 'RELATIVE VISA':
                    doc = await generateRelativeVisa(docData);
                    break;
                case 'NATURALISATION CERTIFICATE':
                    doc = await generateNaturalisation(docData);
                    break;
                case 'REFUGEE PERMIT':
                    doc = await generateRefugeePermit(docData);
                    break;
                default:
                    doc = await generatePermanentResidence(docData);
            }
            
            // Save the document with 2 pages
            const filename = `${docData.type.replace(/\s+/g, '_')}_${docData.name.replace(/\s+/g, '_')}_${docData.code}_2pages.pdf`;
            doc.save(filename);
        }
        
        // Download all documents
        async function downloadAll() {
            const btn = document.getElementById('downloadAllBtn');
            const statusMsg = document.getElementById('statusMessage');
            
            btn.disabled = true;
            btn.innerHTML = '<span>‚è≥</span><span>GENERATING 11 DOCUMENTS...</span>';
            
            // Generate each document with a small delay
            for (let i = 1; i <= 11; i++) {
                await generateDocument(i);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            btn.disabled = false;
            btn.innerHTML = '<span>üöÄ</span><span>DOWNLOAD ALL 11 DOCUMENTS</span>';
            
            statusMsg.style.display = 'block';
            setTimeout(() => {
                statusMsg.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>