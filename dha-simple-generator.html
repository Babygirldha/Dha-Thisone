<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHA Official Document Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #005a3c, #ffd700);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .coat-of-arms {
            font-size: 80px;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        h1 {
            color: #005a3c;
            font-size: 32px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .subtitle {
            color: #666;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .verification-badge {
            display: inline-block;
            background: #d32f2f;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .document-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-left: 5px solid #005a3c;
            transition: all 0.3s;
        }
        
        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .document-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .document-title {
            color: #005a3c;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .document-name {
            color: #333;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .verification-code {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            color: #d32f2f;
            font-weight: bold;
            margin-bottom: 15px;
            display: inline-block;
        }
        
        .download-btn {
            background: #005a3c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .download-btn:hover {
            background: #007850;
            transform: translateY(-2px);
        }
        
        .download-btn:active {
            transform: scale(0.98);
        }
        
        .download-all-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .download-all-btn {
            background: linear-gradient(135deg, #005a3c, #007850);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .download-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 90, 60, 0.4);
        }
        
        .download-all-btn:disabled {
            opacity: 0.6;
            cursor: wait;
        }
        
        .status-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border: 2px solid #c3e6cb;
        }
        
        .security-notice {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #ffeeba;
            text-align: center;
        }
        
        .hidden-qr {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="coat-of-arms">ü¶Ö</div>
            <h1>Department of Home Affairs</h1>
            <div class="subtitle">Republic of South Africa</div>
            <div class="subtitle" style="color: #888; font-size: 14px;">Official Document Generator System</div>
            <div class="verification-badge">‚úì International Verification Enabled</div>
        </div>

        <!-- Security Notice -->
        <div class="security-notice">
            <strong>‚ö†Ô∏è SECURITY NOTICE:</strong> All documents generated include international verification codes and QR codes for authentication. Documents are valid for official use.
        </div>

        <!-- Documents Grid -->
        <div class="documents-grid">
            <!-- Document 1 -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Muhammad Hasnain Younis</div>
                <div class="verification-code">DHA-2025-10001</div>
                <button class="download-btn" onclick="generateDocument(1)">üì• Download PDF</button>
            </div>

            <!-- Document 2 -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Anna Munaf</div>
                <div class="verification-code">DHA-2025-10002</div>
                <button class="download-btn" onclick="generateDocument(2)">üì• Download PDF</button>
            </div>

            <!-- Document 3 -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Ikram Ibrahim Yusuf Mansuri</div>
                <div class="verification-code">DHA-2025-10003</div>
                <button class="download-btn" onclick="generateDocument(3)">üì• Download PDF</button>
            </div>

            <!-- Document 4 -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Tasleen Mohsin</div>
                <div class="verification-code">DHA-2025-10004</div>
                <button class="download-btn" onclick="generateDocument(4)">üì• Download PDF</button>
            </div>

            <!-- Document 5 -->
            <div class="document-card">
                <div class="document-icon">üìã</div>
                <div class="document-title">Permanent Residence Permit</div>
                <div class="document-name">Mohammed Munaf</div>
                <div class="verification-code">DHA-2025-10005</div>
                <button class="download-btn" onclick="generateDocument(5)">üì• Download PDF</button>
            </div>

            <!-- Document 6 -->
            <div class="document-card">
                <div class="document-icon">üìú</div>
                <div class="document-title">Birth Certificate</div>
                <div class="document-name">Zaheera Osman</div>
                <div class="verification-code">DHA-2025-20001</div>
                <button class="download-btn" onclick="generateDocument(6)">üì• Download PDF</button>
            </div>

            <!-- Document 7 -->
            <div class="document-card">
                <div class="document-icon">üíº</div>
                <div class="document-title">Work Permit</div>
                <div class="document-name">Example Applicant</div>
                <div class="verification-code">DHA-2025-30001</div>
                <button class="download-btn" onclick="generateDocument(7)">üì• Download PDF</button>
            </div>

            <!-- Document 8 -->
            <div class="document-card">
                <div class="document-icon">üèõÔ∏è</div>
                <div class="document-title">Asylum Seeker Permit</div>
                <div class="document-name">Example Applicant</div>
                <div class="verification-code">DHA-2025-40001</div>
                <button class="download-btn" onclick="generateDocument(8)">üì• Download PDF</button>
            </div>

            <!-- Document 9 -->
            <div class="document-card">
                <div class="document-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <div class="document-title">Relative Visa</div>
                <div class="document-name">Example Applicant</div>
                <div class="verification-code">DHA-2025-50001</div>
                <button class="download-btn" onclick="generateDocument(9)">üì• Download PDF</button>
            </div>

            <!-- Document 10 -->
            <div class="document-card">
                <div class="document-icon">üéñÔ∏è</div>
                <div class="document-title">Naturalisation Certificate</div>
                <div class="document-name">Example Applicant</div>
                <div class="verification-code">DHA-2025-60001</div>
                <button class="download-btn" onclick="generateDocument(10)">üì• Download PDF</button>
            </div>

            <!-- Document 11 -->
            <div class="document-card">
                <div class="document-icon">üè†</div>
                <div class="document-title">Temporary Residence Permit</div>
                <div class="document-name">Example Applicant</div>
                <div class="verification-code">DHA-2025-70001</div>
                <button class="download-btn" onclick="generateDocument(11)">üì• Download PDF</button>
            </div>
        </div>

        <!-- Download All Section -->
        <div class="download-all-section">
            <h2 style="color: #005a3c; margin-bottom: 20px;">Generate All Documents</h2>
            <p style="color: #666; margin-bottom: 20px;">Click below to generate and download all 11 official documents at once</p>
            <button class="download-all-btn" id="downloadAllBtn" onclick="downloadAll()">
                <span>üöÄ</span>
                <span>DOWNLOAD ALL DOCUMENTS</span>
            </button>
            <div class="status-message" id="statusMessage">
                ‚úÖ All documents generated successfully!
            </div>
        </div>
    </div>

    <!-- Hidden QR Code Canvas -->
    <div id="qrcode" class="hidden-qr"></div>

    <script>
        const { jsPDF } = window.jspdf;

        // Document data
        const documents = [
            { id: 1, type: 'PERMANENT RESIDENCE PERMIT', name: 'MUHAMMAD HASNAIN YOUNIS', code: 'DHA-2025-10001', passport: 'AB1234567', nationality: 'PAKISTANI' },
            { id: 2, type: 'PERMANENT RESIDENCE PERMIT', name: 'ANNA MUNAF', code: 'DHA-2025-10002', passport: 'CD2345678', nationality: 'PAKISTANI' },
            { id: 3, type: 'PERMANENT RESIDENCE PERMIT', name: 'IKRAM IBRAHIM YUSUF MANSURI', code: 'DHA-2025-10003', passport: 'EF3456789', nationality: 'INDIAN' },
            { id: 4, type: 'PERMANENT RESIDENCE PERMIT', name: 'TASLEEN MOHSIN', code: 'DHA-2025-10004', passport: 'GH4567890', nationality: 'PAKISTANI' },
            { id: 5, type: 'PERMANENT RESIDENCE PERMIT', name: 'MOHAMMED MUNAF', code: 'DHA-2025-10005', passport: 'IJ5678901', nationality: 'PAKISTANI' },
            { id: 6, type: 'BIRTH CERTIFICATE', name: 'ZAHEERA OSMAN', code: 'DHA-2025-20001', hospital: 'Chris Hani Baragwanath Hospital', dob: '15/03/2024' },
            { id: 7, type: 'WORK PERMIT', name: 'EXAMPLE APPLICANT', code: 'DHA-2025-30001', employer: 'Tech Solutions (Pty) Ltd', position: 'Software Developer' },
            { id: 8, type: 'ASYLUM SEEKER PERMIT', name: 'EXAMPLE APPLICANT', code: 'DHA-2025-40001', refugeeNumber: 'AS2025/001', country: 'Zimbabwe' },
            { id: 9, type: 'RELATIVE VISA', name: 'EXAMPLE APPLICANT', code: 'DHA-2025-50001', relationship: 'Parent', sponsor: 'John Smith' },
            { id: 10, type: 'NATURALISATION CERTIFICATE', name: 'EXAMPLE APPLICANT', code: 'DHA-2025-60001', citizenshipDate: '01/01/2025', previousNationality: 'Nigerian' },
            { id: 11, type: 'TEMPORARY RESIDENCE PERMIT', name: 'EXAMPLE APPLICANT', code: 'DHA-2025-70001', validUntil: '31/12/2025', purpose: 'Business' }
        ];

        // Generate QR Code as data URL
        function generateQRCode(text) {
            const qrDiv = document.getElementById('qrcode');
            qrDiv.innerHTML = '';
            
            const qr = new QRCode(qrDiv, {
                text: text,
                width: 100,
                height: 100,
                colorDark: '#000000',
                colorLight: '#FFFFFF'
            });
            
            // Wait for QR code to be generated
            return new Promise((resolve) => {
                setTimeout(() => {
                    const canvas = qrDiv.querySelector('canvas');
                    if (canvas) {
                        resolve(canvas.toDataURL('image/png'));
                    } else {
                        resolve(null);
                    }
                }, 100);
            });
        }

        // Add official header to PDF
        function addOfficialHeader(doc, title) {
            // Government header
            doc.setFillColor(0, 90, 60);
            doc.rect(0, 0, 210, 40, 'F');
            
            // White text on green background
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.text('REPUBLIC OF SOUTH AFRICA', 105, 15, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('DEPARTMENT OF HOME AFFAIRS', 105, 23, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text(title, 105, 32, { align: 'center' });
            
            // Reset text color
            doc.setTextColor(0, 0, 0);
        }

        // Add watermark
        function addWatermark(doc) {
            doc.setTextColor(200, 200, 200);
            doc.setFontSize(60);
            doc.setFont(undefined, 'bold');
            
            // Save the current graphics state
            doc.saveGraphicsState();
            
            // Add diagonal watermark
            doc.text('DHA OFFICIAL', 105, 150, { 
                align: 'center',
                angle: 45,
                opacity: 0.1
            });
            
            // Restore graphics state
            doc.restoreGraphicsState();
            doc.setTextColor(0, 0, 0);
        }

        // Add official seal/stamp
        function addOfficialSeal(doc, x, y) {
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(2);
            doc.circle(x, y, 15);
            doc.setLineWidth(1);
            doc.circle(x, y, 12);
            
            doc.setFontSize(8);
            doc.setFont(undefined, 'bold');
            doc.text('DEPARTMENT OF', x, y - 5, { align: 'center' });
            doc.text('HOME AFFAIRS', x, y, { align: 'center' });
            doc.text('SOUTH AFRICA', x, y + 5, { align: 'center' });
        }

        // Add footer with verification
        function addFooter(doc, verificationCode) {
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(0.5);
            doc.line(20, 260, 190, 260);
            
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text('This document is electronically generated and internationally verifiable', 105, 270, { align: 'center' });
            doc.text('Verification Code: ' + verificationCode, 105, 275, { align: 'center' });
            doc.text('Verify at: www.dha.gov.za/verify', 105, 280, { align: 'center' });
            
            doc.setTextColor(0, 90, 60);
            doc.setFont(undefined, 'bold');
            doc.text('Immigration Act, 2002 (Act No. 13 of 2002)', 105, 288, { align: 'center' });
            doc.setFont(undefined, 'normal');
            doc.setTextColor(0, 0, 0);
        }

        // Generate Permanent Residence Permit
        async function generatePermanentResidence(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'PERMANENT RESIDENCE PERMIT');
            addWatermark(doc);
            
            // Document number
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 55);
            doc.setFont(undefined, 'normal');
            
            // Main title
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('PERMANENT RESIDENCE PERMIT', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            // Personal details box
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(0.5);
            doc.rect(20, 80, 170, 70);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT HOLDER INFORMATION:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Nationality: ' + (docData.nationality || 'FOREIGN NATIONAL'), 25, 108);
            doc.text('Passport Number: ' + (docData.passport || 'XX1234567'), 25, 116);
            doc.text('Date of Issue: ' + new Date().toLocaleDateString('en-GB'), 25, 124);
            doc.text('Valid From: ' + new Date().toLocaleDateString('en-GB'), 25, 132);
            doc.text('Status: APPROVED - PERMANENT RESIDENCE', 25, 140);
            
            // Rights and privileges
            doc.setFont(undefined, 'bold');
            doc.text('RIGHTS AND PRIVILEGES:', 25, 160);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Unlimited right to reside in South Africa', 30, 168);
            doc.text('‚Ä¢ Right to work without additional permits', 30, 175);
            doc.text('‚Ä¢ Access to social services and healthcare', 30, 182);
            doc.text('‚Ä¢ May apply for South African citizenship after 5 years', 30, 189);
            
            // International verification
            doc.setFont(undefined, 'bold');
            doc.setFontSize(11);
            doc.text('INTERNATIONAL VERIFICATION:', 25, 205);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('This permit is internationally recognized under:', 25, 213);
            doc.text('‚Ä¢ The Hague Convention on Authentication', 30, 220);
            doc.text('‚Ä¢ SADC Protocol on Facilitation of Movement', 30, 227);
            doc.text('‚Ä¢ International Civil Aviation Organization (ICAO) Standards', 30, 234);
            
            // QR Code
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|PRP|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
                doc.setFontSize(8);
                doc.text('Scan to Verify', 175, 235, { align: 'center' });
            }
            
            // Official seal
            addOfficialSeal(doc, 50, 240);
            
            // Authorized signature
            doc.line(110, 245, 170, 245);
            doc.setFontSize(10);
            doc.text('Director-General', 140, 252, { align: 'center' });
            doc.text('Home Affairs', 140, 257, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Birth Certificate
        async function generateBirthCertificate(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'BIRTH CERTIFICATE');
            addWatermark(doc);
            
            // Certificate number
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('CERTIFICATE NUMBER: ' + docData.code, 20, 55);
            doc.setFont(undefined, 'normal');
            
            // Main title
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.text('BIRTH CERTIFICATE', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            // Birth details
            doc.setDrawColor(0, 90, 60);
            doc.setLineWidth(0.5);
            doc.rect(20, 80, 170, 90);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PARTICULARS OF BIRTH:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Date of Birth: ' + (docData.dob || '15/03/2024'), 25, 108);
            doc.text('Place of Birth: ' + (docData.hospital || 'Chris Hani Baragwanath Hospital'), 25, 116);
            doc.text('City/Town: JOHANNESBURG', 25, 124);
            doc.text('Province: GAUTENG', 25, 132);
            doc.text('Country: SOUTH AFRICA', 25, 140);
            
            doc.setFont(undefined, 'bold');
            doc.text('PARENT INFORMATION:', 25, 155);
            doc.setFont(undefined, 'normal');
            doc.text('Mother: FATIMA OSMAN', 25, 163);
            doc.text('Father: AHMED OSMAN', 110, 163);
            
            // International verification
            doc.setFont(undefined, 'bold');
            doc.text('INTERNATIONAL RECOGNITION:', 25, 180);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('This certificate is internationally recognized for:', 25, 188);
            doc.text('‚Ä¢ Passport applications worldwide', 30, 195);
            doc.text('‚Ä¢ International adoption procedures', 30, 202);
            doc.text('‚Ä¢ Apostille certification under The Hague Convention', 30, 209);
            doc.text('‚Ä¢ UNICEF child registration standards', 30, 216);
            
            // QR Code
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|BC|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 185, 30, 30);
                doc.setFontSize(8);
                doc.text('Scan to Verify', 175, 220, { align: 'center' });
            }
            
            // Official seal
            addOfficialSeal(doc, 50, 235);
            
            // Registrar signature
            doc.line(110, 240, 170, 240);
            doc.setFontSize(10);
            doc.text('Registrar of Births', 140, 247, { align: 'center' });
            doc.text('Department of Home Affairs', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Work Permit
        async function generateWorkPermit(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'GENERAL WORK PERMIT');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 55);
            
            doc.setFontSize(16);
            doc.text('GENERAL WORK PERMIT', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 80, 170, 80);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT HOLDER DETAILS:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Passport Number: XX1234567', 25, 108);
            doc.text('Employer: ' + (docData.employer || 'Tech Solutions (Pty) Ltd'), 25, 116);
            doc.text('Position: ' + (docData.position || 'Software Developer'), 25, 124);
            doc.text('Sector: Information Technology', 25, 132);
            doc.text('Valid From: ' + new Date().toLocaleDateString('en-GB'), 25, 140);
            doc.text('Valid Until: ' + new Date(Date.now() + 365*24*60*60*1000*3).toLocaleDateString('en-GB'), 25, 148);
            doc.text('Status: APPROVED - ACTIVE', 25, 156);
            
            doc.setFont(undefined, 'bold');
            doc.text('CONDITIONS:', 25, 170);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ May only work for specified employer', 30, 178);
            doc.text('‚Ä¢ Must maintain valid passport', 30, 185);
            doc.text('‚Ä¢ Must comply with South African labour laws', 30, 192);
            doc.text('‚Ä¢ Report change of employment within 7 days', 30, 199);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(11);
            doc.text('INTERNATIONAL LABOUR COMPLIANCE:', 25, 213);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ ILO Convention Standards', 30, 221);
            doc.text('‚Ä¢ SADC Labour Migration Protocol', 30, 228);
            
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|WP|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 240);
            
            doc.line(110, 245, 170, 245);
            doc.text('Director-General', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Asylum Seeker Permit
        async function generateAsylumPermit(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'ASYLUM SEEKER PERMIT');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 55);
            
            doc.setFontSize(16);
            doc.text('ASYLUM SEEKER TEMPORARY PERMIT', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 80, 170, 80);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('APPLICANT DETAILS:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Refugee Number: ' + (docData.refugeeNumber || 'AS2025/001'), 25, 108);
            doc.text('Country of Origin: ' + (docData.country || 'Zimbabwe'), 25, 116);
            doc.text('Date of Application: ' + new Date().toLocaleDateString('en-GB'), 25, 124);
            doc.text('Valid Until: ' + new Date(Date.now() + 180*24*60*60*1000).toLocaleDateString('en-GB'), 25, 132);
            doc.text('Status: ASYLUM APPLICATION PENDING', 25, 140);
            doc.text('Refugee Reception Office: JOHANNESBURG', 25, 148);
            
            doc.setFont(undefined, 'bold');
            doc.text('RIGHTS UNDER SECTION 22:', 25, 163);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Right to remain in South Africa', 30, 171);
            doc.text('‚Ä¢ Right to work and study', 30, 178);
            doc.text('‚Ä¢ Access to basic healthcare', 30, 185);
            doc.text('‚Ä¢ Protection from refoulement', 30, 192);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(11);
            doc.text('INTERNATIONAL PROTECTION:', 25, 206);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ 1951 UN Refugee Convention', 30, 214);
            doc.text('‚Ä¢ 1967 Protocol Relating to Status of Refugees', 30, 221);
            doc.text('‚Ä¢ OAU Convention (1969)', 30, 228);
            
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|ASP|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 240);
            
            doc.line(110, 245, 170, 245);
            doc.text('Refugee Status Officer', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Relative Visa
        async function generateRelativeVisa(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, "RELATIVE'S VISA");
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('VISA NUMBER: ' + docData.code, 20, 55);
            
            doc.setFontSize(16);
            doc.text("RELATIVE'S VISA", 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 80, 170, 85);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('APPLICANT INFORMATION:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Passport Number: XX1234567', 25, 108);
            doc.text('Nationality: FOREIGN NATIONAL', 25, 116);
            doc.text('Relationship: ' + (docData.relationship || 'Parent'), 25, 124);
            
            doc.setFont(undefined, 'bold');
            doc.text('SPONSOR INFORMATION:', 25, 137);
            doc.setFont(undefined, 'normal');
            doc.text('Sponsor Name: ' + (docData.sponsor || 'John Smith'), 25, 145);
            doc.text('Sponsor ID/Permit: 8501015800080', 25, 153);
            doc.text('Sponsor Status: South African Citizen', 25, 161);
            
            doc.setFont(undefined, 'bold');
            doc.text('VISA CONDITIONS:', 25, 175);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Valid for family reunification purposes', 30, 183);
            doc.text('‚Ä¢ May not work without additional permit', 30, 190);
            doc.text('‚Ä¢ Must reside with sponsor', 30, 197);
            doc.text('‚Ä¢ Valid for 2 years, renewable', 30, 204);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(11);
            doc.text('INTERNATIONAL FAMILY RIGHTS:', 25, 218);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ UN Convention on Rights of the Child', 30, 226);
            doc.text('‚Ä¢ International Covenant on Civil and Political Rights', 30, 233);
            
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|RV|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 240);
            
            doc.line(110, 245, 170, 245);
            doc.text('Immigration Officer', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Naturalisation Certificate
        async function generateNaturalisation(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'CERTIFICATE OF NATURALISATION');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('CERTIFICATE NUMBER: ' + docData.code, 20, 55);
            
            doc.setFontSize(16);
            doc.text('CERTIFICATE OF NATURALISATION', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setFontSize(12);
            doc.text('This is to certify that', 105, 85, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text(docData.name, 105, 95, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setFontSize(12);
            doc.text('has been granted', 105, 105, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('SOUTH AFRICAN CITIZENSHIP', 105, 115, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setFontSize(12);
            doc.text('by Naturalisation', 105, 125, { align: 'center' });
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 135, 170, 60);
            
            doc.setFontSize(11);
            doc.text('Previous Nationality: ' + (docData.previousNationality || 'Nigerian'), 25, 145);
            doc.text('Date of Naturalisation: ' + (docData.citizenshipDate || '01/01/2025'), 25, 153);
            doc.text('ID Number Issued: 2501015800080', 25, 161);
            doc.text('Place of Ceremony: PRETORIA', 25, 169);
            doc.text('Oath of Allegiance: ADMINISTERED', 25, 177);
            doc.text('Certificate Status: VALID AND PERMANENT', 25, 185);
            
            doc.setFont(undefined, 'bold');
            doc.text('CITIZENSHIP RIGHTS:', 25, 203);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Full voting rights', 30, 211);
            doc.text('‚Ä¢ South African passport eligibility', 30, 218);
            doc.text('‚Ä¢ All constitutional rights and duties', 30, 225);
            doc.text('‚Ä¢ Protection under international law as SA citizen', 30, 232);
            
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|NC|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 240);
            
            doc.line(110, 245, 170, 245);
            doc.text('Minister of Home Affairs', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Generate Temporary Residence Permit
        async function generateTemporaryResidence(docData) {
            const doc = new jsPDF();
            
            addOfficialHeader(doc, 'TEMPORARY RESIDENCE PERMIT');
            addWatermark(doc);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT NUMBER: ' + docData.code, 20, 55);
            
            doc.setFontSize(16);
            doc.text('TEMPORARY RESIDENCE PERMIT', 105, 70, { align: 'center' });
            doc.setFont(undefined, 'normal');
            
            doc.setDrawColor(0, 90, 60);
            doc.rect(20, 80, 170, 75);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PERMIT HOLDER DETAILS:', 25, 90);
            doc.setFont(undefined, 'normal');
            
            doc.text('Full Name: ' + docData.name, 25, 100);
            doc.text('Passport Number: XX1234567', 25, 108);
            doc.text('Nationality: FOREIGN NATIONAL', 25, 116);
            doc.text('Purpose of Stay: ' + (docData.purpose || 'Business'), 25, 124);
            doc.text('Date of Issue: ' + new Date().toLocaleDateString('en-GB'), 25, 132);
            doc.text('Valid Until: ' + (docData.validUntil || '31/12/2025'), 25, 140);
            doc.text('Status: APPROVED - TEMPORARY RESIDENCE', 25, 148);
            
            doc.setFont(undefined, 'bold');
            doc.text('CONDITIONS OF STAY:', 25, 165);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Must leave South Africa before permit expiry', 30, 173);
            doc.text('‚Ä¢ May engage only in authorized activities', 30, 180);
            doc.text('‚Ä¢ Must maintain valid passport', 30, 187);
            doc.text('‚Ä¢ Report change of address within 7 days', 30, 194);
            doc.text('‚Ä¢ May apply for extension 60 days before expiry', 30, 201);
            
            doc.setFont(undefined, 'bold');
            doc.setFontSize(11);
            doc.text('INTERNATIONAL MOBILITY:', 25, 215);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('‚Ä¢ Multiple entry visa included', 30, 223);
            doc.text('‚Ä¢ SADC regional travel permitted', 30, 230);
            
            const qrData = `DHA-VERIFY:${docData.code}|${docData.name}|TRP|${new Date().toISOString()}`;
            const qrCodeDataUrl = await generateQRCode(qrData);
            if (qrCodeDataUrl) {
                doc.addImage(qrCodeDataUrl, 'PNG', 160, 200, 30, 30);
            }
            
            addOfficialSeal(doc, 50, 240);
            
            doc.line(110, 245, 170, 245);
            doc.text('Chief Immigration Officer', 140, 252, { align: 'center' });
            
            addFooter(doc, docData.code);
            
            return doc;
        }

        // Main function to generate document
        async function generateDocument(docId) {
            const docData = documents.find(d => d.id === docId);
            if (!docData) return;
            
            let doc;
            
            // Generate appropriate document based on type
            if (docData.type === 'PERMANENT RESIDENCE PERMIT') {
                doc = await generatePermanentResidence(docData);
            } else if (docData.type === 'BIRTH CERTIFICATE') {
                doc = await generateBirthCertificate(docData);
            } else if (docData.type === 'WORK PERMIT') {
                doc = await generateWorkPermit(docData);
            } else if (docData.type === 'ASYLUM SEEKER PERMIT') {
                doc = await generateAsylumPermit(docData);
            } else if (docData.type === 'RELATIVE VISA') {
                doc = await generateRelativeVisa(docData);
            } else if (docData.type === 'NATURALISATION CERTIFICATE') {
                doc = await generateNaturalisation(docData);
            } else if (docData.type === 'TEMPORARY RESIDENCE PERMIT') {
                doc = await generateTemporaryResidence(docData);
            } else {
                // Default to work permit for other types
                doc = await generateWorkPermit(docData);
            }
            
            // Save the document
            const filename = `${docData.type.replace(/\s+/g, '_')}_${docData.name.replace(/\s+/g, '_')}_${docData.code}.pdf`;
            doc.save(filename);
        }

        // Download all documents
        async function downloadAll() {
            const btn = document.getElementById('downloadAllBtn');
            const statusMsg = document.getElementById('statusMessage');
            
            btn.disabled = true;
            btn.innerHTML = '<span>‚è≥</span><span>GENERATING DOCUMENTS...</span>';
            
            // Generate each document with a small delay
            for (let i = 1; i <= 11; i++) {
                await generateDocument(i);
                await new Promise(resolve => setTimeout(resolve, 500)); // Small delay between generations
            }
            
            btn.disabled = false;
            btn.innerHTML = '<span>üöÄ</span><span>DOWNLOAD ALL DOCUMENTS</span>';
            
            statusMsg.style.display = 'block';
            setTimeout(() => {
                statusMsg.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>